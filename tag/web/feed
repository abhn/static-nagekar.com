<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>web &#8211; Abhishek Nagekar</title>
	<atom:link href="https://nagekar.com/tag/web/feed" rel="self" type="application/rss+xml" />
	<link>https://nagekar.com</link>
	<description>hobbyist {x}</description>
	<lastBuildDate>Mon, 25 Jul 2022 09:30:26 +0000</lastBuildDate>
	<language>en-US</language>
	<sy:updatePeriod>
	hourly	</sy:updatePeriod>
	<sy:updateFrequency>
	1	</sy:updateFrequency>
	

<image>
	<url>https://nagekar.com/wp-content/uploads/2020/12/cropped-cropped-cropped-favicon-32x32.png</url>
	<title>web &#8211; Abhishek Nagekar</title>
	<link>https://nagekar.com</link>
	<width>32</width>
	<height>32</height>
</image> 
	<item>
		<title>Cross Site Scripting (XSS), Cross Site Request Forgery (CSRF) And Server Side Request Forgery (SSRF)</title>
		<link>https://nagekar.com/2022/07/cross-site-scripting-xss-cross-site-request-forgery-csrf-and-server-side-request-forgery-ssrf.html</link>
		
		<dc:creator><![CDATA[Abhishek Nagekar]]></dc:creator>
		<pubDate>Mon, 25 Jul 2022 09:29:42 +0000</pubDate>
				<category><![CDATA[Uncategorized]]></category>
		<category><![CDATA[security]]></category>
		<category><![CDATA[web]]></category>
		<guid isPermaLink="false">https://www.nagekar.com/?p=1565</guid>

					<description><![CDATA[XSS, CSRF (or XSRF) and SSRF are common vulnerability in modern web applications where an attacker tries to imitates either a legitimate client to an unsuspecting server or a legitimate server to another unsuspecting server. The basic underlying principle behind each of these attack remains the same; performing action on behalf of a legitimate entity. [&#8230;]]]></description>
										<content:encoded><![CDATA[
<p>XSS, CSRF (or XSRF) and SSRF are common vulnerability in modern web applications where an attacker tries to imitates either a legitimate client to an unsuspecting server or a legitimate server to another unsuspecting server. The basic underlying principle behind each of these attack remains the same; performing action on behalf of a legitimate entity. Let&#8217;s look at each of them in a bit more detail and learn about how to protect our web applications against each of them.</p>



<h2 class="wp-block-heading">XSS (Cross Site Scripting) </h2>



<p>XSS or Cross Site Scripting occurs when an attacker manages to execute malicious script code in a victim&#8217;s browser as the victim. Browsers store a lot of sensitive information in them. Some of this information is used to identify a user on a website. </p>



<p>A script loaded from a website can access information stored on your browser through that website, which is how sessions work in your browser. That&#8217;s how Facebook or any other website knows to show you your personalized information and not someone else&#8217;s.</p>



<p>XSS occurs if an attacker gets control over the scripts running in your browser. If they can execute code, they can steal your login credentials and trick you into installing malware on your computer.</p>



<p>There are different kinds of XSS attacks and they depend on where the payload is stored.</p>



<h3 class="wp-block-heading">Reflected XSS</h3>



<p>A reflected XSS vulnerability occurs when a piece of data from a URL is reflected back into the website code unsanitized and can be injected into. This can be a result of a GET or a POST request, and it is especially severe as an unauthenticated GET request as that URL can be shared on social media and anyone clicking on it gets compromised.</p>



<p><strong>Remediation of reflected XSS</strong> &#8211; Sanitization of all user inputs before passing it back into the view</p>



<h3 class="wp-block-heading">Stored XSS</h3>



<p>A stored XSS vulnerability occurs when a web application stores an XSS attack payload without sanitizing it and then displays it back to the same user or a different user. A notable recent example is <a href="https://blog.hubspot.com/website/cross-site-scripting">British Airways website getting compromised</a> and exposing sensitive data including credit card information of 380,000 transactions.</p>



<p><strong>Remediation of stored XSS</strong> &#8211; It is the same as with reflected XSS: Sanitization of all user inputs before storing the data in the database.</p>



<h3 class="wp-block-heading">DOM based XSS</h3>



<p>Unlike reflected/stored XSS, a DOM based XSS occurs only on the client&#8217;s side. This can be a result of a user typing in a string into an input field that gets parsed and executed as code. An attacker can trick a user to paste a string into their browser which will execute due to insecure parsing and compromise a user&#8217;s credentials.</p>



<p>Remediation against DOM based XSS &#8211; Display text as text, and nothing else. Instead of <code>element.innerHtml</code> use <code>element.innerText</code> or <code>element.textContext</code> to ensure the data displayed back to a user is purely text.</p>



<h2 class="wp-block-heading">CSRF (Cross Side Request Forgery)</h2>



<p>CSRF occurs when a malicious website makes a request to a legitimate server through an unsuspecting victim. </p>



<p>Web applications communicate with clients through HTTP requests. When a request is made, the browser attacks all information that it knows about the website along with the request, including login/authentication credentials (called cookies).</p>



<p>If the web server doesn&#8217;t have protective measures, a request made through a legitimate website and an attacker&#8217;s website look exactly the same (or they can be forged to look the same). As a result, an attacker can make a request telling the victim&#8217;s bank to transfer $100 to the attacker&#8217;s account, and since the request is made through the attacker&#8217;s browser, the bank&#8217;s server will process it as a legitimate request.</p>



<p><strong>Remediation of CSRF </strong>&#8211; CSRF can be easily prevented by requiring any unsafe request to validate itself using a valid CSRF token that can only be found in the website&#8217;s code and changes on every use. Additionally, authentication/login cookies can be marked as sameSite only, such that any third party website making the request doesn&#8217;t contain the sensitive authentication cookies. </p>



<h2 class="wp-block-heading">SSRF (Server Side Request Forgery)</h2>



<p>SSRF is similar to CSRF, but instead of an compromised client making a request to an unsuspecting server, here a compromised server makes a request to itself or another unsuspecting server.</p>



<p>Since a server might be a privileged node in the network, the attacker can make the server access and return sensitive information or perform privileged actions that the attacker&#8217;s account wouldn&#8217;t allow. </p>



<p>SSRF can also be used to trigger code execution in servers where the vulnerability can be exploited using the privileges of the server itself.</p>



<p><strong>Remediation of SSRF</strong> &#8211; Any outgoing request needs to be explicitly allowed from the application by maintaining an allowlist of domains and servers a given server can connect to. The scope of these requests should be made as narrow as possible. </p>



<h2 class="wp-block-heading">In conclusion</h2>



<p>I hope that was an interesting quick read on one of the most common vulnerabilities in modern web application. Injection and SSRF are two of OWASP&#8217;s top 10 for 2021, so it is definitely worth looking into them and protecting our web applications from potential vulnerabilities.</p>



<p>Read more on OWASP top 10 here: <a href="https://owasp.org/www-project-top-ten/">https://owasp.org/www-project-top-ten/</a></p>



<p>Thank you for reading</p>
]]></content:encoded>
					
		
		
			</item>
		<item>
		<title>Setting Up ModSecurity + OWASP Core Rule Set + Nginx On AWS EC2</title>
		<link>https://nagekar.com/2022/07/setting-modsecurity-core-rule-set.html</link>
		
		<dc:creator><![CDATA[Abhishek Nagekar]]></dc:creator>
		<pubDate>Sun, 10 Jul 2022 15:35:08 +0000</pubDate>
				<category><![CDATA[Uncategorized]]></category>
		<category><![CDATA[security]]></category>
		<category><![CDATA[web]]></category>
		<guid isPermaLink="false">https://www.nagekar.com/?p=1460</guid>

					<description><![CDATA[ModSecurity is a web application firewall. It can protect your web application from preying eyes of vulnerability scanners and attackers. It is extremely customizable, and when paired with OWASP&#8217;s Core Rule Set, covers quite a lot of web technologies and frameworks. In this article, we&#8217;ll set up ModSecurity on an AWS EC2 Server running Nginx [&#8230;]]]></description>
										<content:encoded><![CDATA[<p>ModSecurity is a web application firewall. It can protect your web application from preying eyes of vulnerability scanners and attackers. It is extremely customizable, and when paired with OWASP&#8217;s Core Rule Set, covers quite a lot of web technologies and frameworks.</p>
<p>In this article, we&#8217;ll set up ModSecurity on an AWS EC2 Server running Nginx web server.</p>


<p>Table of contents</p>



<ul class="wp-block-list"><li><a href="#set-up-nginx" data-type="internal" data-id="#set-up-nginx">Set up Nginx on Ubuntu server</a></li><li><a href="#set-up-modsecurity">Set up ModSecurity</a></li><li><a href="#set-up-connector">Set up ModSecurity &lt;-> Nginx connector</a></li><li><a href="#load-modsecurity">Loading ModSecurity module in Nginx</a></li><li><a href="#set-up-crs">Set up OWASP Core Rule Set</a></li><li><a href="#turn-on-live">Turn on ModSecurity in live mode and test XSS payload</a></li></ul>



<h2 class="wp-block-heading" id="set-up-nginx">Set up Nginx on Ubuntu server</h2>



<p>For this tutorial, we&#8217;re using AWS LightSail&#8217;s Ubuntu image. Choose any instance size depending on your requirements. I&#8217;ll choose a 40$ / Month instance with 8GB RAM and 2vCPUs just so that the compilation of ModSecurity is faster.</p>



<figure class="wp-block-image size-large"><img fetchpriority="high" decoding="async" width="616" height="1024" src="https://www.nagekar.com/wp-content/uploads/2022/06/image-1-616x1024.png" alt="" class="wp-image-1550" srcset="https://nagekar.com/wp-content/uploads/2022/06/image-1-616x1024.png 616w, https://nagekar.com/wp-content/uploads/2022/06/image-1-181x300.png 181w, https://nagekar.com/wp-content/uploads/2022/06/image-1.png 754w" sizes="(max-width: 616px) 100vw, 616px" /></figure>



<p>Once the instance is created, log into the instance with SSH and update packages</p>



<pre class="wp-block-code"><code>$ apt update &amp;&amp; apt upgrade -y</code></pre>



<p>Install Nginx</p>



<pre class="wp-block-code"><code>$ sudo apt install nginx</code></pre>



<p>Check what version of Nginx did we get from our package manager. This will be used when compiling Nginx later.</p>



<pre class="wp-block-code"><code>$ nginx -v</code></pre>



<p>I got the following output:</p>



<pre class="wp-block-code"><code>nginx version: nginx/1.18.0 (Ubuntu)</code></pre>



<p>To make sure the webserver is successfully installed and running, simply visit the IP address of the server. It should look something similar to this:</p>



<figure class="wp-block-image size-full"><img decoding="async" width="648" height="230" src="https://www.nagekar.com/wp-content/uploads/2022/06/image-2.png" alt="" class="wp-image-1551" srcset="https://nagekar.com/wp-content/uploads/2022/06/image-2.png 648w, https://nagekar.com/wp-content/uploads/2022/06/image-2-300x106.png 300w" sizes="(max-width: 648px) 100vw, 648px" /></figure>



<h2 class="wp-block-heading" id="set-up-modsecurity">Set up ModSecurity</h2>



<p>First we&#8217;ll need to install compilation and other dependencies.</p>



<pre class="wp-block-code"><code>$ sudo apt-get install -y apt-utils autoconf automake build-essential git libcurl4-openssl-dev libgeoip-dev liblmdb-dev libpcre++-dev libtool libxml2-dev libyajl-dev pkgconf wget zlib1g-dev git</code></pre>



<p>Next we&#8217;ll clone the ModSecurity repository into the /opt directory</p>



<pre class="wp-block-code"><code>$ cd /opt &amp;&amp; sudo git clone --recursive https://github.com/SpiderLabs/ModSecurity &amp;&amp; cd ModSecurity</code></pre>



<p>Next we run the build script</p>



<pre class="wp-block-code"><code>$ sudo ./build.sh</code></pre>



<p>Next we&#8217;ll run the compile script that will fetch all the dependencies for the compilation</p>



<pre class="wp-block-code"><code>$ sudo ./configure</code></pre>



<p>It is possible that this command fails and reports you of any dependencies that are still missing. You can simply google them with &#8220;install XYZ on Ubuntu&#8221; and run the configure command again. Ideally it will just exit without any errors.<br>Next we start with the actual compilation of ModSecurity</p>



<pre class="wp-block-code"><code>$ sudo make</code></pre>



<p>A reason why I didn&#8217;t go with the smallest server was that this step is resource intensive and could take 15 minutes or more depending on your server&#8217;s CPU and memory.</p>



<p>If all went through, we can now install ModSecurity</p>



<pre class="wp-block-code"><code>$ sudo make install</code></pre>



<p>If all went through without any errors, we have ModSecurity installed. </p>



<h2 class="wp-block-heading" id="set-up-connector">Set up ModSecurity &lt;-&gt; Nginx connector</h2>



<p>We start off by downloading ModSecurity-Nginx and Nginx source code. <strong>Note that the version of Nginx in the next command must match the version installed on our system</strong>. For me, that&#8217;s  1.18.0 but it could be different for you.</p>



<pre class="wp-block-code"><code>$ cd /opt &amp;&amp; git clone https://github.com/SpiderLabs/ModSecurity-nginx.git
$ cd /opt &amp;&amp; sudo wget http://nginx.org/download/nginx-1.18.0.tar.gz</code></pre>



<p>Untar the Nginx source. Replace the Nginx version in the next command if needed.</p>



<pre class="wp-block-code"><code>$ sudo tar -xvf nginx-1.18.0.tar.gz</code></pre>



<p>Next, we need to grab configure arguments. For that, run the nginx command with a capital &#8216;V&#8217; flag.</p>



<pre class="wp-block-code"><code>$ nginx -V
nginx version: nginx/1.18.0 (Ubuntu)
built with OpenSSL 1.1.1f  31 Mar 2020
TLS SNI support enabled
<strong>configure arguments: --with-cc-opt='-g -O2 -fdebug-prefix-map=/build/nginx-7KvRN5/nginx-1.18.0=. -fstack-protector-strong -Wformat -Werror=format-security -fPIC -Wdate-time -D_FORTIFY_SOURCE=2' --with-ld-opt='-Wl,-Bsymbolic-functions -Wl,-z,relro -Wl,-z,now -fPIC' --prefix=/usr/share/nginx --conf-path=/etc/nginx/nginx.conf --http-log-path=/var/log/nginx/access.log --error-log-path=/var/log/nginx/error.log --lock-path=/var/lock/nginx.lock --pid-path=/run/nginx.pid --modules-path=/usr/lib/nginx/modules --http-client-body-temp-path=/var/lib/nginx/body --http-fastcgi-temp-path=/var/lib/nginx/fastcgi --http-proxy-temp-path=/var/lib/nginx/proxy --http-scgi-temp-path=/var/lib/nginx/scgi --http-uwsgi-temp-path=/var/lib/nginx/uwsgi --with-debug --with-compat --with-pcre-jit --with-http_ssl_module --with-http_stub_status_module --with-http_realip_module --with-http_auth_request_module --with-http_v2_module --with-http_dav_module --with-http_slice_module --with-threads --with-http_addition_module --with-http_gunzip_module --with-http_gzip_static_module --with-http_image_filter_module=dynamic --with-http_sub_module --with-http_xslt_module=dynamic --with-stream=dynamic --with-stream_ssl_module --with-mail=dynamic --with-mail_ssl_module</strong></code></pre>



<p>Note the &#8220;configure arguments&#8221; in the command&#8217;s output. We need to build modsecurity with these arguments.</p>



<pre class="wp-block-code"><code>$ sudo ./configure --add-dynamic-module=../ModSecurity-nginx &lt;paste configure args here&gt;</code></pre>



<p>For example, here&#8217;s what I&#8217;ll run:</p>



<pre class="wp-block-code"><code>$ sudo ./configure --add-dynamic-module=../ModSecurity-nginx --with-cc-opt='-g -O2 -fdebug-prefix-map=/build/nginx-7KvRN5/nginx-1.18.0=. -fstack-protector-strong -Wformat -Werror=format-security -fPIC -Wdate-time -D_FORTIFY_SOURCE=2' --with-ld-opt='-Wl,-Bsymbolic-functions -Wl,-z,relro -Wl,-z,now -fPIC' --prefix=/usr/share/nginx --conf-path=/etc/nginx/nginx.conf --http-log-path=/var/log/nginx/access.log --error-log-path=/var/log/nginx/error.log --lock-path=/var/lock/nginx.lock --pid-path=/run/nginx.pid --modules-path=/usr/lib/nginx/modules --http-client-body-temp-path=/var/lib/nginx/body --http-fastcgi-temp-path=/var/lib/nginx/fastcgi --http-proxy-temp-path=/var/lib/nginx/proxy --http-scgi-temp-path=/var/lib/nginx/scgi --http-uwsgi-temp-path=/var/lib/nginx/uwsgi --with-debug --with-compat --with-pcre-jit --with-http_ssl_module --with-http_stub_status_module --with-http_realip_module --with-http_auth_request_module --with-http_v2_module --with-http_dav_module --with-http_slice_module --with-threads --with-http_addition_module --with-http_gunzip_module --with-http_gzip_static_module --with-http_image_filter_module=dynamic --with-http_sub_module --with-http_xslt_module=dynamic --with-stream=dynamic --with-stream_ssl_module --with-mail=dynamic --with-mail_ssl_module</code></pre>



<p>Don&#8217;t copy the above command. You must use the configure arguments supplied by your installation of Nginx.</p>



<p>Next we build the modules</p>



<pre class="wp-block-code"><code>$ sudo make modules</code></pre>



<p>This is a compilation step and may take a little while (a minute or so) to complete. The final step here is to copy the compiled modules to a place from where we can reference them from our Nginx config.</p>



<pre class="wp-block-code"><code>$ sudo mkdir /etc/nginx/modules
$ sudo cp objs/ngx_http_modsecurity_module.so /etc/nginx/modules</code></pre>



<h2 class="wp-block-heading" id="load-modsecurity">Loading ModSecurity module in Nginx</h2>



<p>Simply add the following line to the nginx config file at <code>/etc/nginx/nginx.conf</code> outside any block.</p>



<pre class="wp-block-code"><code>load_module /etc/nginx/modules/ngx_http_modsecurity_module.so;</code></pre>



<h2 class="wp-block-heading" id="set-up-crs"><br>Set up OWASP Core Rule Set</h2>



<p>OWASP&#8217;s Core Rule Set is a set of rules that cover most common frameworks and technologies as well as cover signatures for common web application attack payload. It is a good place to start if you don&#8217;t want to write custom rules for many common attacks.</p>



<p>First, we&#8217;ll clone the modsecurity-crs repository</p>



<pre class="wp-block-code"><code>$ sudo git clone https://github.com/coreruleset/coreruleset /opt/coreruleset</code></pre>



<p>Then we&#8217;ll rename the crs-setup config file</p>



<pre class="wp-block-code"><code>$ sudo mv /opt/coreruleset/crs-setup.conf.example /opt/coreruleset/crs-setup.conf</code></pre>



<p>Activate the default exclusion rule file.</p>



<pre class="wp-block-code"><code>sudo mv /opt/coreruleset/rules/REQUEST-900-EXCLUSION-RULES-BEFORE-CRS.conf.example /opt/coreruleset/rules/REQUEST-900-EXCLUSION-RULES-BEFORE-CRS.conf</code></pre>



<p>Next we create a place for coreruleset to live within <code>/etc/nginx</code> and copy some additional config files.</p>



<pre class="wp-block-code"><code>$ sudo mkdir -p /etc/nginx/modsec
$ sudo cp /opt/ModSecurity/unicode.mapping /etc/nginx/modsec
$ sudo cp /opt/ModSecurity/modsecurity.conf-recommended /etc/nginx/modsec/modsecurity.conf</code></pre>



<p>Next we create a config file that will include our main ModSecurity config file and CRS setup files.</p>



<pre class="wp-block-code"><code>$ sudo touch /etc/nginx/modsec/main.conf</code></pre>



<p>And add the following lines to the config file.</p>



<pre class="wp-block-code"><code>Include /etc/nginx/modsec/modsecurity.conf
Include /opt/coreruleset/crs-setup.conf
Include /opt/coreruleset/rules/*.conf</code></pre>



<p>Finally, we reference this main.conf file from our Nginx config.</p>



<pre class="wp-block-code"><code>$ sudo vim /etc/nginx/sites-available/default</code></pre>



<p>And add the following line within the server block.</p>



<pre class="wp-block-code"><code>modsecurity on;
modsecurity_rules_file /etc/nginx/modsec/main.conf;</code></pre>



<h2 class="wp-block-heading" id="turn-on-modsecurity"><br>Turn ModSecurity &#8220;on&#8221; and test XSS payload</h2>



<p>So far, we&#8217;ve configured everything but if we restart Nginx now, it won&#8217;t filter attacks but only detect them since the default operating mode of ModSecurity is to only log malicious requests. To change that, let&#8217;s open the file <code>/etc/nginx/modsec/modsecurity.conf</code> and change the line</p>



<pre class="wp-block-code"><code>SecRuleEngine DetectionOnly</code></pre>



<p>to</p>



<pre class="wp-block-code"><code>SecRuleEngine On</code></pre>



<p>For our changes to go live, we&#8217;ll need to restart Nginx.</p>



<pre id="block-688d1141-18c0-45f4-8bf1-c008cd8526f1" class="wp-block-code"><code>$ sudo systemctl restart nginx</code></pre>



<p>Let&#8217;s test our ModSecurity installation. Open your browser and send a sample payload in the GET parameter. It doesn&#8217;t have to be a real parameter, but just something that can trigger an XSS filter.</p>



<pre class="wp-block-code"><code>http:&#47;&#47;&#91;server-ip]/index.html?xss-payload=&lt;script&gt;alert(1)&lt;/script&gt;</code></pre>



<figure class="wp-block-image size-full"><img decoding="async" width="934" height="206" src="https://www.nagekar.com/wp-content/uploads/2022/06/image-3.png" alt="" class="wp-image-1552" srcset="https://nagekar.com/wp-content/uploads/2022/06/image-3.png 934w, https://nagekar.com/wp-content/uploads/2022/06/image-3-300x66.png 300w, https://nagekar.com/wp-content/uploads/2022/06/image-3-768x169.png 768w" sizes="(max-width: 934px) 100vw, 934px" /></figure>



<p>That&#8217;s ideal. ModSecurity is working and blocking seemingly malicious requests to our web server. Now any application that sits behind our web server will be protected against many generic web application attacks, even OWASP Top 10 thanks to OWASP&#8217;s CoreRuleSet. </p>



<h2 class="wp-block-heading">In conclusion</h2>



<p>It isn&#8217;t the most straightforward of installations, but it isn&#8217;t very difficult either. The hard part, however, starts here and it is to get rid of all false positives and tweak the installation such that it fits the needs of your specific web application. Depending on how complex an application you&#8217;re trying to protect, it can be fairly time consuming.</p>



<p>I&#8217;ll write an article on how to tweak the parameters of ModSecurity and make it fit our needs in the future in a separate article. </p>



<p>That&#8217;s it for this article, thank you for reading! </p>
]]></content:encoded>
					
		
		
			</item>
		<item>
		<title>WordPress Security Checklist: How To Secure Your WordPress Website</title>
		<link>https://nagekar.com/2022/04/wordpress-security-checklist.html</link>
		
		<dc:creator><![CDATA[Abhishek Nagekar]]></dc:creator>
		<pubDate>Mon, 18 Apr 2022 14:40:00 +0000</pubDate>
				<category><![CDATA[Uncategorized]]></category>
		<category><![CDATA[security]]></category>
		<category><![CDATA[web]]></category>
		<category><![CDATA[wordpress]]></category>
		<guid isPermaLink="false">https://www.nagekar.com/?p=1387</guid>

					<description><![CDATA[WordPress has been powering my blog since the start of last year. In fact, migrating my Jekyll template to WordPress was one of the highlights of my new year 2021 and I&#8217;m very happy that I did, although I didn&#8217;t publish as much as I had hoped for. Fortunately, I&#8217;ve learned a lot more about [&#8230;]]]></description>
										<content:encoded><![CDATA[
<p>WordPress has been powering my blog <a href="https://www.nagekar.com/2021/01/life-goes-full-circle-blog-back-to-wordpress.html">since the start of last year</a>. In fact, migrating my Jekyll template to WordPress was one of the highlights of my new year 2021 and I&#8217;m very happy that I did, although I didn&#8217;t publish as much as I had hoped for. Fortunately, I&#8217;ve learned a lot more about WordPress over the course of a year than when I started. In this short primer, I hope to go into a bit more depth on how to securely run a self hosted WordPress website.</p>



<h2 class="wp-block-heading">Prerequisites</h2>



<p>Before we get started, there are a few things that we need to make sure we have to</p>



<ul class="wp-block-list"><li>Self hosted WordPress installation with SSH access</li><li>Administrator account to set up plugins</li></ul>



<h2 class="wp-block-heading">Table of contents</h2>



<ol class="wp-block-list"><li><a href="#plugins" data-type="internal" data-id="#plugins">Keep plugins to the minimum and up to date</a></li><li><a href="#file-permissions">Fix file permissions</a></li><li><a href="http://tfa">Two-Factor Authentication</a></li><li><a href="#failed-logins">Set up auto banning of failed logins</a></li><li><a href="#regular-backups">Enable regular backups</a></li><li><a href="http://xml-rpc">Disable XML-RPC</a></li><li><a href="#file-editing">Disable file editing in WordPress admin</a></li><li><a href="#waf">Use a Web Application Firewall</a></li><li><a href="http://general-security">Don&#8217;t forget the usual web security measures</a></li></ol>



<h2 class="wp-block-heading" id="plugins">1. Keep plugins to the minimum and up to date</h2>



<p>I wish I could just sticky something like this on top of most of my articles, but most people trying to attack our websites don&#8217;t have the time or resources to develop and use 0days. They use existing exploits out in the wild and some of these exploits can be months old, if not more. WordPress core and plugin authors can only do so much more than promptly releasing patches for security vulnerabilities that they find.</p>



<p>So then it is up to us as site admins to make sure we patch as soon as is feasible. Having worked on many large codebases, I know automatic updating isn&#8217;t always possible or even desirable, but having an eye on the changelog can definitely help not get compromised.</p>



<p>I&#8217;d also recommend a web security helper plugin that sends alert emails when it detects outdated plugins / themes / core.</p>



<h2 class="wp-block-heading" id="file-permissions">2. Fix file permissions</h2>



<p>During development, many files and directories permissions are way too open to make it easy to set up the website and all plugins. In production, however, the permissions can be dialed down a notch to prevent anyone with any access on the server to take over the whole website.</p>



<p>Similarly, attackers typically upload shell code using the uploads functionality, and if code execution is disabled in the directory, we make it harder for this attack to succeed.</p>



<p>A detailed guide on setting file permissions can be found on official WordPress documentation: <a href="https://wordpress.org/support/article/changing-file-permissions/">https://wordpress.org/support/article/changing-file-permissions/</a></p>



<h2 class="wp-block-heading" id="tfa">3. Two-Factor Authentication</h2>



<p>Administrator accounts have many powers on a WordPress website, and a compromised administrator account can lead to uploading of <a href="https://en.wikipedia.org/wiki/Shellcode">PHP shell code</a> leading to command execution and server compromise.</p>



<p>To make sure admin accounts are extra secure, enforce 2FA on all administrator accounts. This can be done by any <a href="https://wordpress.org/plugins/search/2fa/">2FA or login security plugin</a> on the WordPress plugin store.</p>



<h2 class="wp-block-heading" id="failed-logins">4. Set up auto banning of failed logins</h2>



<p>Since WordPress doesn&#8217;t ship with any builtin way of auto-banning failed login attempts, we have to rely on plugins like WordFence. WordFence will need to be configured with options to block login attempts after a certain number of failed attempts.</p>



<figure class="wp-block-image"><img loading="lazy" decoding="async" width="1024" height="362" src="https://www.nagekar.com/wp-content/uploads/2022/02/2022-04-12_09-08-1024x362.png" alt="" class="wp-image-1519" srcset="https://nagekar.com/wp-content/uploads/2022/02/2022-04-12_09-08-1024x362.png 1024w, https://nagekar.com/wp-content/uploads/2022/02/2022-04-12_09-08-300x106.png 300w, https://nagekar.com/wp-content/uploads/2022/02/2022-04-12_09-08-768x272.png 768w, https://nagekar.com/wp-content/uploads/2022/02/2022-04-12_09-08.png 1450w" sizes="auto, (max-width: 1024px) 100vw, 1024px" /></figure>



<p>WordFence can also help you disable execution in upload directories, block IP addresses making malicious requests and much more.</p>



<h2 class="wp-block-heading" id="regular-backups">5. Enable regular backups</h2>



<p>While we can take preventive measures against mishaps, we can never be sure. Hence it is imperative that the website is backed up regularly. Backing up can be done at multiple places. The database can be backed up separately from the static assets and files. There are many plugins, like WPVivid, that help you fine tune what gets backed up and where it gets stored. It is always nice if you can afford an external backup location, like AWS S3.</p>



<p>The hosting provider might also have ways of backing up the website. For example, AWS Lightsail has daily instance snapshots which backs up the entire disk.</p>



<h2 class="wp-block-heading" id="xml-rpc">6. Disable XML-RPC</h2>



<p>If you don&#8217;t use plugins that rely on XML-RPC or using the WordPress mobile app, it is wise to disable XML-RPC which removes another widely used attack surface by attackers. Many plugins allow the disabling of XML-RPC, including the aforementioned WordFence.</p>



<h2 class="wp-block-heading" id="file-editing">7. Disable file editing in WordPress admin</h2>



<p>Disable editing of files from WordPress admin as that&#8217;s almost never a good idea, especially if you can achieve the same using more secure methods like SSH. To disable file editor, simply add </p>



<p><code>define( 'DISALLOW_FILE_EDIT', true );</code></p>



<p>to your <code>wp-config.php</code> file.</p>



<h2 class="wp-block-heading" id="waf">8. Use a Web Application Firewall</h2>



<p>A firewall plugin like <a href="https://sucuri.net/">Sucuri</a> or <a href="https://www.wordfence.com">WordFence</a> can identify attack signatures and block malicious requests. Many also include IP address block lists that prevent known malicious IP addresses from reaching your WordPress website.</p>



<p>For more control, there&#8217;s <a href="https://github.com/SpiderLabs/ModSecurity">ModSecurity</a>. ModSecurity needs to be installed alongside the web server and it can detect and block known attack signatures for not just WordPress but just about any popular web framework. It does require a deeper technical know how to setup and maintain ModSecurity, and a plugin might work be a better approach for most people.</p>



<h2 class="wp-block-heading" id="general-security">9. Don&#8217;t forget the usual web security measures</h2>



<p>A WordPress website is, at the end of it all, a website. While there are WordPress specific ways of hardening a WordPress installation, there is also a whole plethora of best practices that apply to every website, including the WordPress ones. </p>



<ol class="wp-block-list"><li><strong>Use HTTPS</strong> &#8211; SSL/TLS certificates are free, and usually come by default with many hosting providers and CDNs. Don&#8217;t forget to turn it on and enforce it in strict mode.</li><li> <strong>Use appropriate security headers </strong>&#8211; Headers tell the browser how to handle your website&#8217;s content. Many client side attacks can be mitigated by using the right set of headers. A detailed list of useful headers can be found on OWASP&#8217;s website: <a href="https://owasp.org/www-project-secure-headers" target="_blank" rel="noreferrer noopener">https://owasp.org/www-project-secure-headers</a></li><li><strong>Use CAPTCHA on login page</strong> &#8211; to prevent bot submissions and more sophisticated bruteforce attacks, enforce a CAPTCHA like reCaptcha on login page. WordFence supports this out of the box (needs an API key from Google). </li><li><strong>Handle user input with care when using a custom theme</strong> &#8211; when using a custom theme that accepts user input in the form of query parameters to show filtered content, the regular best practices around user generated input has to be followed. Embedding user input in output can lead to Cross Site Scripting, while passing it straight to the database can lead to SQL Injection.</li></ol>



<h2 class="wp-block-heading">In conclusion</h2>



<p>I hope that was useful. If you have any questions around WordPress or suggestions to improve this article, feel free to reach out to me via email. Thank you for reading!</p>
]]></content:encoded>
					
		
		
			</item>
		<item>
		<title>Perfect 100/100 PageSpeed Score With WordPress</title>
		<link>https://nagekar.com/2022/03/perfect-100-pagespeed-score-wordpress.html</link>
		
		<dc:creator><![CDATA[Abhishek Nagekar]]></dc:creator>
		<pubDate>Thu, 31 Mar 2022 00:02:19 +0000</pubDate>
				<category><![CDATA[Uncategorized]]></category>
		<category><![CDATA[blogging]]></category>
		<category><![CDATA[web]]></category>
		<guid isPermaLink="false">https://www.nagekar.com/?p=1487</guid>

					<description><![CDATA[A long time ago I worked on a theme called Elementary for my Jekyll blog. The goal was simple, to create a website that just works, and works fast. In fact, I&#8217;ll just paste the line from the readme of the GitHub repository. This is my personal blog&#8217;s Jekyll template that I&#8217;ve been optimizing for [&#8230;]]]></description>
										<content:encoded><![CDATA[
<p>A long time ago I worked on a theme called <a href="https://github.com/abhn/Elementary">Elementary</a> for my Jekyll blog. The goal was simple, to create a website that just works, and works fast. In fact, I&#8217;ll just paste the line from the readme of the GitHub repository.</p>



<blockquote class="wp-block-quote is-layout-flow wp-block-quote-is-layout-flow"><p dir="auto">This is my personal blog&#8217;s Jekyll template that I&#8217;ve been optimizing for performance, accessibility, usability, readability and simplicity in general.</p><p dir="auto">I personally do not approve of personal blogs bloated with hundreds of kilobytes of trackers and analytics code, and hence, this is an attempt at creating something that I&#8217;d be comfortable with using on my website.</p></blockquote>



<p>The goal was accomplished. I managed to get a perfect score on many of the pages. But I wanted to write more and while on the go, and plaintext editing on phones is a pain. Then the other problem was to add it to git and push it. In short, working with a static blog from an Android phone wasn&#8217;t easy.</p>



<p>That&#8217;s when I moved to WordPress. I ported the theme to <a href="https://github.com/abhn/Elementary-Wordpress">Elementary-WordPress</a>, which is essentially the same theme but in a WordPress shell. It worked really well, but the problem was all the bloat that WordPress sends to the frontend. For a while I didn&#8217;t care enough. I was still serving a fast website, albeit with Jquery, emojis and other code that wasn&#8217;t getting used anywhere else.</p>



<p>Today, that changed. I finally took some time to optimize the website and got back my perfect 100/100 PageSpeed score. Here&#8217;s how I did it.</p>



<h2 class="wp-block-heading">Table of contents</h2>



<ol class="wp-block-list"><li><a href="#jquery">Disable jQuery</a></li><li><a href="#wp-embed">Disable wp-embed</a></li><li><a href="#block-library-css">Disable block library CSS</a></li><li><a href="#emoji">Disable emoji</a></li><li><a href="#fonts">Serve fonts from same domain</a></li><li><a href="#font-display">Use font-display: optional property</a></li><li><a href="#memcached">Use an in-memory page cache like Memcached</a></li><li><a href="#conflicting-cache">Fix conflicting cache strategies</a></li><li><a href="#cdn">Use a CDN for asset delivery</a></li><li><a href="#inline-css-js">TODO: Inline all CSS and Javascript</a></li></ol>



<h2 class="wp-block-heading" id="jquery">Disable jQuery</h2>



<p>If your website isn&#8217;t ancient, there&#8217;s a good chance you&#8217;re not using it. If some plugin you&#8217;re using is using jQuery, consider alternatives. It will save you ~30KB and an HTTP request. Adding the following to the <code>functions.php</code> should do it.</p>



<pre class="wp-block-preformatted">function jquery_dequeue() { <br>&nbsp;&nbsp;wp_deregister_script( 'jquery' ); <br>} <br>add_action( 'wp_enqueue_scripts', 'jquery_dequeue' );</pre>



<h2 class="wp-block-heading" id="wp-embed">Disable wp-embed</h2>



<p>The following snippet <a href="https://wordpress.stackexchange.com/questions/211701/what-does-wp-embed-min-js-do-in-wordpress-4-4">from this answer</a> needs to be added to <code>functions.php</code></p>



<pre class="wp-block-preformatted">function wp_embed_dequeue() {<br>&nbsp; wp_deregister_script( 'wp-embed' );<br>}<br>add_action( 'wp_footer', 'wp_embed_dequeue' );</pre>



<h2 class="wp-block-heading" id="block-library-css">Disable block library CSS</h2>



<p>*Sigh* This goes into the <code>functions.php</code></p>



<pre class="wp-block-preformatted">function remove_wp_block_library_css(){<br>&nbsp; wp_dequeue_style( 'wp-block-library' );<br>}<br>add_action( 'wp_enqueue_scripts', 'remove_wp_block_library_css' );</pre>



<h2 class="wp-block-heading" id="emoji">Disable emoji</h2>



<p>I found some nice code to disable a whole bunch of unnecessary actions from this guide here: <a href="https://kinsta.com/knowledgebase/disable-emojis-wordpress/#2-disable-emojis-in-wordpress-with-code">https://kinsta.com/knowledgebase/disable-emojis-wordpress/#2-disable-emojis-in-wordpress-with-code</a></p>



<h2 class="wp-block-heading" id="fonts">Serve fonts from same domain</h2>



<p>If you&#8217;re not super keen on using the smart browser detection functionality that Google Fonts offers and are happy only supporting modern browsers, simply downloading the font files and linking them with <code>@font-face</code> can save an additional DNS and HTTP request.</p>



<h2 class="wp-block-heading" id="font-display">Use font-display: optional property</h2>



<p>I&#8217;m using <code>font-display: optional;</code> CSS property on my @font-face and it pushed my PageSpeed score over the top. Essentially it prevents the CLS, or <a href="https://web.dev/cls/">Cumulative Layout Shift</a> metric of Core Web Vitals from getting affected due to page shifting due to slow loading of font files.</p>



<p>Read more about it here: <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/@font-face/font-display">https://developer.mozilla.org/en-US/docs/Web/CSS/@font-face/font-display</a></p>



<h2 class="wp-block-heading" id="memcached">Use an in-memory page cache like Memcached</h2>



<p>Building pages to serve the users is expensive as it involves the database, but isn&#8217;t something that needs to be done for every visitor visiting the same page. A plugin like W3 Total Cache coupled with a Memcached instance (could be running on the same server as the website) could enable caching of pages among other resources in memory, reducing the load on the server and improving performance for cache-hit pages.</p>



<figure class="wp-block-image"><img loading="lazy" decoding="async" width="1024" height="378" src="https://www.nagekar.com/wp-content/uploads/2022/03/2022-03-31_11-34-1024x378.png" alt="memcached" class="wp-image-1503" srcset="https://nagekar.com/wp-content/uploads/2022/03/2022-03-31_11-34-1024x378.png 1024w, https://nagekar.com/wp-content/uploads/2022/03/2022-03-31_11-34-300x111.png 300w, https://nagekar.com/wp-content/uploads/2022/03/2022-03-31_11-34-768x284.png 768w, https://nagekar.com/wp-content/uploads/2022/03/2022-03-31_11-34.png 1070w" sizes="auto, (max-width: 1024px) 100vw, 1024px" /></figure>



<h2 class="wp-block-heading" id="conflicting-cache">Fix conflicting cache strategies</h2>



<p>I&#8217;m using W3 Total Cache plugin that helps minify and cache CSS and JS files. But I wasn&#8217;t seeing any minification happening. Upon some reading, it turns out that CloudFlare&#8217;s minification conflicts with W3 Total Cache&#8217;s. Disabling it on CloudFlare&#8217;s side fixed the non-minification problem for me.</p>



<h2 class="wp-block-heading" id="cdn">Use a CDN for asset delivery</h2>



<p>Once the thing to deliver is optimized, it is a good idea to optimize the delivery pipeline as well. Since my server is in the same country as me, it is easy to make a mistake of thinking every visitor of the website is seeing a 50 milliseconds time to connect to the server. The further the user is from the origin server, the longer it could take.</p>



<p>Hence, an global CDN like CloudFlare should be used which can serve static content from its edge node physically closest to the visitor.</p>



<h2 class="wp-block-heading" id="inline-css-js">TODO: Inline all CSS and Javascript</h2>



<p>It doesn&#8217;t go beyond 100, but I&#8217;d still like to improve it further. For one, the little bit of CSS and JS that does exist doesn&#8217;t have to need two additional HTTP requests. Inlining that bit will mean that blog posts without an image, which for me are most of them, will get served in only three HTTP requests; the document, the font file and the favicon. Pretty cool, huh?</p>



<h2 class="wp-block-heading">Conclusion</h2>



<p>I&#8217;m pretty pumped about the 100/100 score. WordPress has a reputation for being slow and bloated, but with some simple optimizations, it starts performing like how you&#8217;d expect some text on a page to perform like.</p>



<div class="wp-block-image"><figure class="aligncenter"><img loading="lazy" decoding="async" width="1024" height="897" src="https://www.nagekar.com/wp-content/uploads/2022/03/ba8ec3f5-713a-45c6-b3bc-72c8bcf68b6d-1024x897.jpg" alt="" class="wp-image-1491" srcset="https://nagekar.com/wp-content/uploads/2022/03/ba8ec3f5-713a-45c6-b3bc-72c8bcf68b6d-1024x897.jpg 1024w, https://nagekar.com/wp-content/uploads/2022/03/ba8ec3f5-713a-45c6-b3bc-72c8bcf68b6d-300x263.jpg 300w, https://nagekar.com/wp-content/uploads/2022/03/ba8ec3f5-713a-45c6-b3bc-72c8bcf68b6d-768x672.jpg 768w, https://nagekar.com/wp-content/uploads/2022/03/ba8ec3f5-713a-45c6-b3bc-72c8bcf68b6d.jpg 1206w" sizes="auto, (max-width: 1024px) 100vw, 1024px" /></figure></div>



<div class="wp-block-image"><figure class="aligncenter"><img loading="lazy" decoding="async" width="1024" height="862" src="https://www.nagekar.com/wp-content/uploads/2022/03/bfd494f4-9302-4993-8d24-945e76a7e6f3-1024x862.jpg" alt="" class="wp-image-1492" srcset="https://nagekar.com/wp-content/uploads/2022/03/bfd494f4-9302-4993-8d24-945e76a7e6f3-1024x862.jpg 1024w, https://nagekar.com/wp-content/uploads/2022/03/bfd494f4-9302-4993-8d24-945e76a7e6f3-300x253.jpg 300w, https://nagekar.com/wp-content/uploads/2022/03/bfd494f4-9302-4993-8d24-945e76a7e6f3-768x647.jpg 768w, https://nagekar.com/wp-content/uploads/2022/03/bfd494f4-9302-4993-8d24-945e76a7e6f3.jpg 1208w" sizes="auto, (max-width: 1024px) 100vw, 1024px" /></figure></div>



<p>Thank you for reading!</p>



<p></p>
]]></content:encoded>
					
		
		
			</item>
		<item>
		<title>Life Goes Full Circle &#8211; Blog Back To WordPress</title>
		<link>https://nagekar.com/2021/01/life-goes-full-circle-blog-back-to-wordpress.html</link>
		
		<dc:creator><![CDATA[Abhishek Nagekar]]></dc:creator>
		<pubDate>Tue, 19 Jan 2021 21:43:55 +0000</pubDate>
				<category><![CDATA[Uncategorized]]></category>
		<category><![CDATA[web]]></category>
		<category><![CDATA[wordpress]]></category>
		<guid isPermaLink="false">https://www.nagekar.com/?p=1231</guid>

					<description><![CDATA[Happy new year all! We&#8217;re finally out of 2020, yaay! It has been, for lack of a better word, an interesting year. Not intending on becoming Abhi News Network, I&#8217;ll spare you from having to read about the events of the past year for the thousandth time. Like many people, I realized my full nerd [&#8230;]]]></description>
										<content:encoded><![CDATA[
<p>Happy new year all!</p>
<p>We&#8217;re finally out of 2020, yaay! It has been, for lack of a better word, an interesting year. Not intending on becoming Abhi News Network, I&#8217;ll spare you from having to read about the events of the past year for the thousandth time. Like many people, I realized my full nerd potential and learned how to live indoors for weeks at a time. I also unlocked a new hobby, <a href="https://www.nagekar.com/2020/12/1500-elo-lichess.html">Chess</a>. Some other things like traveling and in-person events definitely took a backseat but can&#8217;t do much about that.</p>
<p>This short post is about moving this blog back to WordPress. I say back, but the fact is that this website was never on WordPress. I started this blog on ghost.org back in early 2014, but had to quickly move it away from there in spite of absolutely loving Ghost (mostly because of the $5/month fees). Next up was Blogger before finally settling on GitHub Pages which, by the way, if you&#8217;re just starting out with blogging and can find your way around git on a terminal, you should give a try. Now, feeling the need for a much more elaborate CMS, I&#8217;ve migrated to WordPress running on <a href="https://aws.amazon.com/lightsail/projects/wordpress/">AWS Lightsail</a>. It does cost money, but this time I can afford it.</p>
<p>Before this blog existed, I used to write on WordPress on an older blog. That feels like an eternity ago, which it was in internet time. I used to write about latest smartphones and compare them against each other (nothing that actually needed to be done by hand, now that I think about it; 8mp vs 5mp camera, 1gb vs 2gb ram and so on). I would walk into Samsung stores and try to make &#8216;hands-on&#8217; videos of their latest phones. I can&#8217;t imagine doing that today, mostly because of how much the smartphone industry has expanded since 2012-13. Also because it doesn&#8217;t interest me anymore. </p>
<p>With WordPress, I hope to be able to write on the go using nothing more than just a browser. <em>&#8220;On the go&#8221;</em> might take some more time to become a normal everyday phrase again, but when that happens, I&#8217;ll be ready with my <a href="https://www.nagekar.com/2020/04/thinkpad-x230-in-2020.html">Thinkpad</a> and a backpack. To not need a text editor to write Markdown/HTML, terminal to commit and push, and to see previews without a developer server would be very liberating. I&#8217;m excited about this future.</p>
<p>I&#8217;ll end this article with a nice picture I took today. Hope you enjoy looking at it as much as I did looking at Stitch in my house today.</p>
<p><img decoding="async" class="alignnone wp-image-1237" src="https://www.nagekar.com/wp-content/uploads/2021/01/stitch-scaled-e1611091985641-1024x993.jpg" alt="" width="640" srcset="https://nagekar.com/wp-content/uploads/2021/01/stitch-scaled-e1611091985641-1024x993.jpg 1024w, https://nagekar.com/wp-content/uploads/2021/01/stitch-scaled-e1611091985641-300x291.jpg 300w, https://nagekar.com/wp-content/uploads/2021/01/stitch-scaled-e1611091985641-768x745.jpg 768w, https://nagekar.com/wp-content/uploads/2021/01/stitch-scaled-e1611091985641-1536x1490.jpg 1536w, https://nagekar.com/wp-content/uploads/2021/01/stitch-scaled-e1611091985641.jpg 1920w" sizes="(max-width: 1024px) 100vw, 1024px" /></p>
<p>Thank you for reading!</p>
]]></content:encoded>
					
		
		
			</item>
		<item>
		<title>Become A 10x &#060;anything&#062; [fail]</title>
		<link>https://nagekar.com/2020/11/become-a-10x-anything.html</link>
		
		<dc:creator><![CDATA[Abhishek Nagekar]]></dc:creator>
		<pubDate>Thu, 19 Nov 2020 23:00:00 +0000</pubDate>
				<category><![CDATA[web]]></category>
		<guid isPermaLink="false">http://wp.nagekar.com/2020/11/19/become-a-10x-anything/</guid>

					<description><![CDATA[Beware the barrenness of a busy life. &#8211; Socrates (from my quotes file) Today, we&#8217;re going to learn how to be a 10x anything. We&#8217;re going to do that by putting slack on mute. But not the simple way. That works, but don&#8217;t expect 10x results. Also, this guide assumes that the most distraction during [&#8230;]]]></description>
										<content:encoded><![CDATA[<blockquote><p>
  Beware the barrenness of a busy life.<br />
  <br />
  &#8211; Socrates (from my <a href="/quotes">quotes</a> file)
</p></blockquote>
<p>
  Today, we&#8217;re going to learn how to be a 10x anything. We&#8217;re going to do that by putting slack on mute. But not the simple way. That works, but don&#8217;t expect 10x results. Also, this guide assumes that the most distraction during worktime comes from Slack. If that&#8217;s not the case for you, you might end up with ~4.5x results (scientific).
</p>
<p>
  What we&#8217;ll essentially be doing is:
</p>
<ul>
<li>Set up Pi-hole on our home network. Pi-hole is a DNS based ad blocker which sinks requests if they&#8217;re for ad network.</li>
<li>Use Pomodoro app on KDE to trigger scripts when the focus session starts and ends. If you haven&#8217;t heard about Pomodoro technique, read up more here: <a href="https://en.wikipedia.org/wiki/Pomodoro_Technique">https://en.wikipedia.org/wiki/Pomodoro_Technique</a>.</li>
<li>The scripts themselves will block any website / app that you don&#8217;t want distracting you when the focus time is on.</li>
</ul>
<h3>Pi-hole</h3>
<p><img decoding="async" src="https://www.nagekar.com/wp-content/uploads/2020/12/pi-hole.png"/></p>
<p>
  Pi-hole is amazing! No, seriously. It blocks all ads and tracking, has a very good interface which supports custom rules for each device, groups and more. All of this is free, open source and pure. Did you star the <a href="https://github.com/pi-hole/pi-hole">repository</a> already?
</p>
<p>
  Pi hole can not only block DNS queries for ads/tracking networks, but also anything you ask it to. We&#8217;ll use it to block Slack on our network.
</p>
<h3>Raspberry Pi</h3>
<p>
  We need something to run the Pi-hole, so grab a Pi zero or a normal Raspberry Pi. A virtual machine / docker would work but then you need that thing running 24/7.
</p>
<h3>Pomodoro app that supports scripts</h3>
<p>
  I&#8217;m sure your operating system of choice has a Pomodoro app made for it. The trick here is to find one that supports executing scripts on certain events like focus time start and end.
</p>
<p><img decoding="async" src="https://www.nagekar.com/wp-content/uploads/2020/12/fokus.png"/></p>
<p>
  As you can see, <a href="https://store.kde.org/p/1308861/">Fokus</a> on the KDE store supports this functionality and is perfect for me since I&#8217;m already on KDE.
</p>
<h3>Router with custom DNS setting</h3>
<p>
  We need to change the DNS settings in our router and point it to our Raspberry Pi&#8217;s IP address. As a backup, we still keep 1.1.1.1. Most routers support this setting. If for some reason you&#8217;re not able to do it at the router level, you can still set custom DNS on each of your device, which is a bit more work.
</p>
<p><img decoding="async" src="https://www.nagekar.com/wp-content/uploads/2020/12/router-dns.png"/></p>
<h3>Ability to not overthink</h3>
<p>
  Given how futile this whole exercise is, if you start questioning yourself <q>why am I even doing any of this when you could just mute Slack?</q>, this exercise (or this blog) is not for you.
</p>
<h3>Tutorial (kinda)</h3>
<p>
  The initial setup is very standard. Install Pi-hole on your Raspberry pi by following their <a href="https://github.com/pi-hole/pi-hole/#one-step-automated-install">official guide</a>. Get the Pomodoro app up and running.
</p>
<p>
  Once that&#8217;s done, we create a directory on our computer and create two files in it: focus-start.sh and focus-end.sh and mark them executable
</p>
<figure class="highlight">
<pre><code class="language-sh" data-lang="sh"><span class="nv">$ </span><span class="nb">mkdir </span>hackerman <span class="o">&amp;&amp;</span> <span class="nb">cd </span>hackerman
<span class="nv">$ </span><span class="nb">touch </span>focus-start.sh focus-end.sh
<span class="nv">$ </span><span class="nb">chmod</span> +x focus-start.sh focus-end.sh</code></pre>
</figure>
<p>
  As the file names suggest, the focus-start.sh will execute when our focus time starts and focus-end.sh executes when our focus time ends. It should look like this in Fokus, our pomodoro app.
</p>
<p><img decoding="async" src="https://www.nagekar.com/wp-content/uploads/2020/12/fokus-script.png"/></p>
<p>
  So now that this is configured, we need to enable passwordless ssh access to our Raspberry Pi. I followed <a href="https://www.raspberrypi.org/documentation/remote-access/ssh/passwordless.md">this guide here</a>. What that enables is just typing <code>ssh pi@raspberrypi.local</code> will log us into the Pi without a password.
</p>
<p>
  Next, we open our files and add the commands to enable and disable Slack&#8217;s domain using a wildcard blacklist/whitelist entry.
</p>
<figure class="highlight">
<pre><code class="language-sh" data-lang="sh"><span class="c"># focus-start.sh</span>
ssh pi@raspberrypi.local <span class="s2">"pihole --wild 'slack.com'"</span></code></pre>
</figure>
<p></p>
<figure class="highlight">
<pre><code class="language-sh" data-lang="sh"><span class="c"># focus-start.sh</span>
ssh pi@raspberrypi.local <span class="s2">"pihole --wild 'slack.com' -d"</span></code></pre>
</figure>
<p>
  The focus-end.sh command is only different in that has the -d flag, which removes the wildcard domain from the blacklist. We can even try running that command on the terminal and verifying if it creates an entry in Pi-hole. Remember to substitute <code>raspberrypi.local</code> with your Raspberry Pi&#8217;s hostname / IP address.
</p>
<figure>
  <img decoding="async" src="https://www.nagekar.com/wp-content/uploads/2020/12/add-slack-pi-hole.png"/><br />
</figure>
<p></p>
<figure>
  <img decoding="async" src="https://www.nagekar.com/wp-content/uploads/2020/12/blacklist.png"/><br />
</figure>
<p>
  That&#8217;s it. The other command works as expected too, removing the slack.com&#8217;s wildcard entry at our discretion.
</p>
<h3>So, how does it (not) work?</h3>
<p>
  Theoretically, we&#8217;re sinking any DNS query for slack.com and any of its subdomain meaning the APIs won&#8217;t work once the blacklist entry has been created. But there are a couple of problems with our approach.
</p>
<p>
  One, Slack&#8217;s messages are transferred over Websocket and once that&#8217;s established (when you open the website / app), it doesn&#8217;t need DNS to work (resolve) for sending and receiving messages.
</p>
<p>
  Even if it did, DNS queries are cached (by a variety of entities like browsers, operating systems etc), so it isn&#8217;t like this is fool proof and starts working the second it is turned on.
</p>
<p>
  Third, many apps use their own DNS and have little regard for your home DNS. For example, I tried to block Whatsapp this way (using <a href="https://github.com/ukanth/afwall/wiki/HOWTO-blocking-WhatsApp">this list</a>) and it just doesn&#8217;t work, at least on Android.
</p>
<h3>A complete fail then?</h3>
<p>
  Not exactly. You can still block websites that you open in browsers, like reddit.com and youtube.com if you spend too much time on those like me. In any case, it is a fun way to learn about how web apps, DNS and ad blocking work and involves a lot of trial and error to get things to work. Oh and yes, we do have a network wide ad blocker which is what Pi-hole does best, so there&#8217;s also that.
</p>
<p>
  That&#8217;s it for this one. Thank you for reading.</p>
]]></content:encoded>
					
		
		
			</item>
		<item>
		<title>DIY Web Analytics</title>
		<link>https://nagekar.com/2020/10/diy-web-analytics.html</link>
		
		<dc:creator><![CDATA[Abhishek Nagekar]]></dc:creator>
		<pubDate>Sun, 11 Oct 2020 22:00:00 +0000</pubDate>
				<category><![CDATA[javascript]]></category>
		<category><![CDATA[python]]></category>
		<category><![CDATA[web]]></category>
		<guid isPermaLink="false">http://wp.nagekar.com/2020/10/11/diy-web-analytics/</guid>

					<description><![CDATA[I&#8217;ve long established that adding heavy duty analytics and tracking scripts to my blog pages isn&#8217;t the right thing to do. Personally, it is also a bit liberating to not know which article of mine is getting a lot of traffic and which isn&#8217;t, because then I&#8217;m not biased by what the internet is searching [&#8230;]]]></description>
										<content:encoded><![CDATA[<p>
  I&#8217;ve long established that adding heavy duty analytics and tracking scripts to my blog pages isn&#8217;t the right thing to do. Personally, it is also a bit liberating to not know which article of mine is getting a lot of traffic and which isn&#8217;t, because then I&#8217;m not biased by what the internet is searching for and can write about pretty much anything that I feel like writing about. <q>10 programming languages you should learn in 2020</q> has exactly the same weight as <q>Let me tell you a funny story from last night</q>, so which one do think I&#8217;d write about?
</p>
<p>
  The analytics and tracking world has come a long way and is viewed very negatively in the light of recent internet incidents. But it started off very simple and had a very simple and non-malicious idea at its core: Getting to know your user better so that you can serve them better.
</p>
<p>
  That thought made me search for a simple analytics solution that I could run on my blog for a couple of weeks and get enough insights to make informed decisions regarding the frontend design changes while not compromising on the privacy of the visitors. If I&#8217;m completely honest, I was also just curious to know these things with no agenda behind it.
</p>
<p>
  I looked into <a href="https://simpleanalytics.com/">Simple Analytics</a>, a nice solution that does exactly what I needed (perhaps a bit more than that), but a little expensive for me at USD 19 a month. There are also self hosted analytics solutions like <a href="https://plausible.io/">Plausible</a>, but that was too much work for realizing this simple thought. So I decided to put something together quickly and the following is what I ended up implementing.
</p>
<h3>Client side JavaScript</h3>
<p>
  On the client side, I needed to get the data that interested me. It was details like the browsers used by my visitors, platform, width of their screens etc. More technically, the user agent, platform, screen width, referrer and the current page&#8217;s url (although I don&#8217;t plan on using it for this article. Spoiler: One of my lowest effort articles is pulling more than half of all pageviews which is a bit saddening).
</p>
<figure class="highlight">
<pre><code class="language-javascript" data-lang="javascript"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre>
</td>
<td class="code">
<pre><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="dl">'</span><span class="s1">doNotTrack</span><span class="dl">'</span> <span class="k">in</span> <span class="nb">navigator</span><span class="p">)</span> <span class="o">||</span> <span class="o">!</span><span class="p">(</span><span class="nb">navigator</span><span class="p">.</span><span class="nx">doNotTrack</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">1</span><span class="dl">'</span><span class="p">))</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">analytics</span> <span class="o">=</span> <span class="p"&gt;{};</span>

  <span class="nx">analytics</span><span class="p">[</span><span class="dl">"</span><span class="s2">href</span><span class="dl">"</span><span class="p">]</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="p"&gt;;</span>
  <span class="nx">analytics</span><span class="p">[</span><span class="dl">"</span><span class="s2">userAgent</span><span class="dl">"</span><span class="p">]</span> <span class="o">=</span> <span class="nb">navigator</span><span class="p">.</span><span class="nx">userAgent</span><span class="p"&gt;;</span>
  <span class="nx">analytics</span><span class="p">[</span><span class="dl">"</span><span class="s2">width</span><span class="dl">"</span><span class="p">]</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">innerWidth</span><span class="p"&gt;;</span>
  <span class="nx">analytics</span><span class="p">[</span><span class="dl">"</span><span class="s2">referrer</span><span class="dl">"</span><span class="p">]</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">referrer</span><span class="p"&gt;;</span>
  <span class="nx">analytics</span><span class="p">[</span><span class="dl">"</span><span class="s2">platform</span><span class="dl">"</span><span class="p">]</span> <span class="o">=</span> <span class="nb">navigator</span><span class="p">.</span><span class="nx">platform</span><span class="p"&gt;;</span>

  <span class="nb">navigator</span><span class="p">.</span><span class="nx">sendBeacon</span><span class="p">(</span><span class="nx">ANALYTICS_ENDPOINT</span><span class="p">,</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">analytics</span><span class="p"&gt;));</span>
<span class="p">}</span>
</pre>
</td>
</tr>
</tbody>
</table>
<p></code></figure>
<p>
  There&#8217;s not much happening here. Just checking if the user prefers to not be tracked, else get the desired data and POST it to our analytics endpoint using the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Navigator/sendBeacon">navigator.sendBeacon</a> API.
</p>
<h3>Server</h3>
<p>
  We need to implement the endpoint that&#8217;s listening for the POST requests from our client browsers. I decided to go with Firebase&#8217;s functions for handling the request and Firebase&#8217;s realtime database to store the data.
</p>
<figure class="highlight">
<pre><code class="language-javascript" data-lang="javascript"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre>
</td>
<td class="code">
<pre><span class="kd">const</span> <span class="nx">functions</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">firebase-functions</span><span class="dl">'</span><span class="p"&gt;);</span>
<span class="kd">const</span> <span class="nx">admin</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">firebase-admin</span><span class="dl">'</span><span class="p"&gt;);</span>

<span class="nx">admin</span><span class="p">.</span><span class="nx">initializeApp</span><span class="p"&gt;();</span>

<span class="kd">const</span> <span class="nx">cors</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">cors</span><span class="dl">'</span><span class="p">)({</span>
  <span class="na">origin</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
<span class="p"&gt;});</span>

<span class="nx">exports</span><span class="p">.</span><span class="nx">handler</span> <span class="o">=</span> <span class="nx">functions</span><span class="p">.</span><span class="nx">https</span><span class="p">.</span><span class="nx">onRequest</span><span class="p">(</span><span class="k">async</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">if</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">method</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">snapshot</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">admin</span><span class="p">.</span><span class="nx">database</span><span class="p">().</span><span class="nx">ref</span><span class="p">(</span><span class="dl">'</span><span class="s1">/hit</span><span class="dl">'</span><span class="p">).</span><span class="nx">push</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p"&gt;));</span>
    <span class="k">return</span> <span class="nx">cors</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span><span class="p">:</span> <span class="dl">'</span><span class="s1">success</span><span class="dl">'</span> <span class="p"&gt;});</span>
    <span class="p"&gt;});</span>
  <span class="p">}</span>
  <span class="k">else</span> <span class="p">{</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span><span class="p">:</span> <span class="dl">'</span><span class="s1">have a good day!</span><span class="dl">'</span> <span class="p"&gt;});</span>
  <span class="p">}</span>
<span class="p"&gt;});</span>
</pre>
</td>
</tr>
</tbody>
</table>
<p></code></figure>
<p>
  Now this is super bad code for a variety of reasons, but it worked for my temporary needs. I deployed this, waited for a couple of weeks and had some data to answer some basic questions about my blog&#8217;s visitors.
</p>
<h3>Parsing data</h3>
<p>
  So at this point I had let this code run long enough to have accumulated couple of hundred entries. It was time to analyze. Firebase allows you to easily export the database in JSON format. Using some basic Python-fu, I created lists of each dimension and passed these lists to Python&#8217;s builtin <code>collections.Counter</code> (which is perfect since I&#8217;m only interested in aggregated stats), and then take the top 5 most frequent items using the <code>.most_common</code> method. Finally, we plot bar charts for these top 5 values across each dimension using Matplotlib to visualize the results.
</p>
<figure class="highlight">
<pre><code class="language-python" data-lang="python"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
</pre>
</td>
<td class="code">
<pre><span class="kn">import</span> <span class="nn">json</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">Counter</span><span class="p">,</span> <span class="n">defaultdict</span>
<span class="kn">from</span> <span class="nn">user_agents</span> <span class="kn">import</span> <span class="n">parse</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>

<span class="n">analytics_data</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">plot_chart_from_ctr</span><span class="p">(</span><span class="n">ctr</span><span class="p">):</span>
    <span class="n">most_common</span> <span class="o">=</span> <span class="n">ctr</span><span class="p">.</span><span class="n">most_common</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
    <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">most_common</span><span class="p">],</span> <span class="p">[</span><span class="n">item</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">most_common</span><span class="p">]</span>
    <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">x</span><span class="p">]</span>
    <span class="n">plt</span><span class="p">.</span><span class="n">bar</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
    <span class="n">plt</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>


<span class="k">def</span> <span class="nf">driver</span><span class="p">():</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">'export.json'</span><span class="p">,</span> <span class="s">'r'</span><span class="p">)</span> <span class="k">as</span> <span class="n">output</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">load</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>
        <span class="n">hit</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">'hit'</span><span class="p">]</span>
        <span class="n">entries</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">hit</span><span class="p">:</span>
            <span class="n">entries</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">hit</span><span class="p">[</span><span class="n">item</span><span class="p">])</span>

        <span class="n">analytics_data</span><span class="p">[</span><span class="s">'height'</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">entries</span><span class="p">:</span>
            <span class="n">analytics_data</span><span class="p">[</span><span class="s">'width'</span><span class="p">].</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="s">'width'</span><span class="p">])</span>
            <span class="n">analytics_data</span><span class="p">[</span><span class="s">'href'</span><span class="p">].</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="s">'href'</span><span class="p">])</span>
            <span class="n">analytics_data</span><span class="p">[</span><span class="s">'platform'</span><span class="p">].</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="s">'platform'</span><span class="p">])</span>
            <span class="n">analytics_data</span><span class="p">[</span><span class="s">'referrer'</span><span class="p">].</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="s">'referrer'</span><span class="p">])</span>
            <span class="n">analytics_data</span><span class="p">[</span><span class="s">'userAgent'</span><span class="p">].</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="s">'userAgent'</span><span class="p">])</span>

    <span class="n">browser_family</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">agent</span> <span class="ow">in</span> <span class="n">analytics_data</span><span class="p">[</span><span class="s">'userAgent'</span><span class="p">]:</span>
        <span class="n">user_agent</span> <span class="o">=</span> <span class="n">parse</span><span class="p">(</span><span class="n">agent</span><span class="p">)</span>
        <span class="n">browser_family</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">user_agent</span><span class="p">.</span><span class="n">browser</span><span class="p">.</span><span class="n">family</span><span class="p">)</span>

    <span class="n">ctr_browser_family</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span><span class="n">browser_family</span><span class="p">)</span>
    <span class="n">plot_chart_from_ctr</span><span class="p">(</span><span class="n">ctr_browser_family</span><span class="p">)</span>

    <span class="n">ctr_platform</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span><span class="n">analytics_data</span><span class="p">[</span><span class="s">'platform'</span><span class="p">])</span>
    <span class="n">plot_chart_from_ctr</span><span class="p">(</span><span class="n">ctr_platform</span><span class="p">)</span>

    <span class="n">ctr_referrer</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span><span class="n">analytics_data</span><span class="p">[</span><span class="s">'referrer'</span><span class="p">])</span>
    <span class="n">plot_chart_from_ctr</span><span class="p">(</span><span class="n">ctr_referrer</span><span class="p">)</span>

    <span class="n">ctr_width</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span><span class="n">analytics_data</span><span class="p">[</span><span class="s">'width'</span><span class="p">])</span>
    <span class="n">plot_chart_from_ctr</span><span class="p">(</span><span class="n">ctr_width</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">driver</span><span class="p">()</span>
</pre>
</td>
</tr>
</tbody>
</table>
<p></code></figure>
<h3>The questions</h3>
<h4>What are the most common browsers?</h4>
<figure>
  <img decoding="async" src="https://www.nagekar.com/wp-content/uploads/2020/12/analytics-browser.png"/><figcaption>I would&#8217;ve guessed this to be the case for browsers, but not in Chrome&#8217;s favour to this extent </figcaption></figure>
<h4>What are the most common platforms?</h4>
<figure>
  <img decoding="async" src="https://www.nagekar.com/wp-content/uploads/2020/12/analytics-platform.png"/><figcaption>Win32 is still the majority platform among my visitors and there&#8217;s some Apple action going on. There&#8217;s also a healthy chunk of Linux X86_64 visitors. The armv7l and armv8l may contain Android devices but hard to tell.</figcaption></figure>
<h4>What are the most common referrers?</h4>
<figure>
  <img decoding="async" src="https://www.nagekar.com/wp-content/uploads/2020/12/analytics-referrer.png"/><figcaption>Unsurprisingly, most of the traffic comes through Google.</figcaption></figure>
<h4>What are the most common screen widths?</h4>
<figure>
  <img decoding="async" src="https://www.nagekar.com/wp-content/uploads/2020/12/analytics-width.png"/><figcaption>There&#8217;s a healthy mix of screen resolutions with the most frequent being 360px.</figcaption></figure>
<h3>In closing</h3>
<p>
  So that&#8217;s it for this little article. I&#8217;m happy with the outcome given how little effort went into this whole assignment. I hope you enjoyed reading it. As always, write me an email in case you have any comments!
</p>
<p>
  Thank you for reading.</p>
]]></content:encoded>
					
		
		
			</item>
		<item>
		<title>What Writing A Web Development Tutorial Taught Me</title>
		<link>https://nagekar.com/2020/03/learnings-writing-web-dev-short-course.html</link>
		
		<dc:creator><![CDATA[Abhishek Nagekar]]></dc:creator>
		<pubDate>Sat, 21 Mar 2020 23:00:00 +0000</pubDate>
				<category><![CDATA[programming]]></category>
		<category><![CDATA[web]]></category>
		<guid isPermaLink="false">http://wp.nagekar.com/2020/03/21/learnings-writing-web-dev-short-course/</guid>

					<description><![CDATA[I recently wrote a tutorial on getting started with web development. It was a frontend only (meaning covering only HTML, CSS and JavaScript), 5 day tutorial that covered very basic web development topics and concepts like HTML elements, CSS selectors and JavaScript language semantics. Along with learning the basics of frontend web development, the course [&#8230;]]]></description>
										<content:encoded><![CDATA[<p>
  I recently wrote a tutorial on getting started with web development. It was a frontend only (meaning covering only HTML, CSS and JavaScript), 5 day tutorial that covered very basic web development topics and concepts like HTML elements, CSS selectors and JavaScript language semantics. Along with learning the basics of frontend web development, the course takers built their very first website which was a simple, one page portfolio site listing their interests and some pictures.
</p>
<p>
  I&#8217;d not go into the technicalities of the course itself, as that&#8217;s off topic. What I&#8217;d like to do in the little post is list down some things I learned while I was writing the course, about writing the course and also about writing your thoughts down in general.
</p>
<ol>
<li><a href="#understanding">If you&#8217;d like to test your understanding, try explaining it</a></li>
<li><a href="#beliefs">Many <em>obviously</em> true beliefs that you hold probably aren&#8217;t true</a></li>
<li><a href="#explaining">Explaining is an art</a></li>
<li><a href="#editor">The role of an editor</a></li>
<li><a href="#focus">Writing requires a lot more focus than programming</a></li>
<li><a href="#continuous_thought">Having a continuous thought train for a multipart article is exponentially more difficult than writing a one off article</a></li>
<li><a href="#plan">Have a plan or outline</a></li>
<li><a href="#know_audience">Know your audience&#8217;s technnical competence</a></li>
</ol>
<p>
  So, without further ado, let&#8217;s get started.
</p>
<h3 id="understanding">If you&#8217;d like to test your understanding, try explaining it</h3>
<blockquote><p>
  &#8220;The person who says he knows what he thinks but cannot express it usually does not know what he thinks.&#8221;<br />
   Mortimer Adler
</p></blockquote>
<p>
  The above quote from this interesting blog post about <a href="https://fs.blog/2012/04/feynman-technique/">Feynman Technique on Farnam Street</a> captures the gist of this learning. We&#8217;re good at convincing ourselves that we understand something when in reality we might not. It is similar to when we speak a language natively and are confident in our knowledge, but then when a language-learner asks us a simple question, we don&#8217;t have an explanation but rather know it &#8216;intuitively&#8217;.
</p>
<p>
  As an example, when I was writing the chapter on JavaScript, I was tempted to write that arrow functions have replaced the &#8216;function()&#8217; functions. I asked myself why I thought that was the case, and I didn&#8217;t have an answer. I had just &#8216;believed&#8217; that to be the case.
</p>
<p>
  Upon researching, I learned the differences in their workings and their use cases, and I came out of that a bit wiser than before. That was just one instance where I wrote something, then asked myself why I thought that was the case, and learned that that was in fact not the case.
</p>
<p>
  The bottom line here is, if you want to learn something well or test your understanding, try explaining it. Interestingly, that&#8217;s just me rediscovering the Feynman technique.
</p>
<h3 id="beliefs">Many <em>obviously</em> true beliefs that you hold probably aren&#8217;t true</h3>
<p>
  This is an extension of the previous point. But with a different takeaway. Since we&#8217;ve now established that many of our beliefs are wrong, it is wise to not be too confident in them and always practice humility when it comes to your knowledge, and consequently, your opinions and worldview. In other words, while it is great to put in time and energy to learn something properly and have opinions about it, it is also important to be ready to accept that you could be wrong and change.
</p>
<p>
  This point is best illustrated by the &#8220;Strong Opinions, Weakly Held&#8221; philosophy, best outlined by a little paragraphy from <a href="https://bobsutton.typepad.com/my_weblog/2006/07/strong_opinions.html">this post.</a>
</p>
<blockquote><p>
  A couple years ago, I was talking the Institutes <a href="https://www.iftf.org/people/bjohansen.html">Bob Johansen</a> about wisdom, and he explained that  to deal with an uncertain future and still move forward  they advise people to have strong opinions, which are weakly held.  They&#8217;ve been giving this advice for years, and I understand that it was first developed by Instituite Director <a href="https://www.saffo.com/">Paul Saffo</a>. Bob explained that weak opinions are problematic because people arent inspired to develop the best arguments possible for them, or to put forth the energy required to test them. Bob explained that it was just as important, however, to not be too attached to what you believe because, otherwise, it undermines your ability to see and hear evidence that clashes with your opinions. This is what psychologists sometimes call the problem of confirmation bias.
</p></blockquote>
<p>
  While you&#8217;re at it, I recommend reading <a href="https://blog.codinghorror.com/strong-opinions-weakly-held/">this article</a> by Jeff Atwood where I first read it. There&#8217;s also this nice TED talk along the same lines.
</p>
<p><iframe loading="lazy" width="560" height="315" src="https://www.youtube.com/embed/jobYTQTgeUE" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></p>
<h3 id="explaining">Explaining is an art</h3>
<p>
  It is not easy to explain why linear-gradient works the way it does. It is hard to explain parameters of a function to someone who has never written any code, and you cannot use words like parameters, arguments or function call before explaining them. In short, writing a beginners programming course is some work (who would&#8217;ve thought?!). Now I look back at all those books, articles and tutorials that taught me the basics of everything I&#8217;ve learned and realize how great it was to have had all of that top quality learning material for free on the internet.
</p>
<p>
  My personal experience is that we don&#8217;t notice when something is very well written or explained, especially with technical writing and documentation. It feels very natural and in-flow. But try to remember the last badly written article that you read. It was exhausting, you had to re-read through paragraphs to make sense of the text and you probably didn&#8217;t even finish it. That&#8217;s why, the next time you read through something and don&#8217;t notice anything wrong, take a moment to appreciate the effort that might&#8217;ve gone into making it come across the way it does.
</p>
<h3 id="editor">The role of an editor</h3>
<p>
  I learned what an editor does while writing this course. I would typically submit a day&#8217;s work as a document, fairly confident that I had done a good job only to find out the next day that the document has 200 new comments and edits. How was that even possible? I&#8217;m not a good writer, accepted, but those many edits? I would genuinely fear submitting my work for editing, just like my younger self would fear exams for all the bad grades I could get.
</p>
<p>
  But in this case, the editor is really there to make the text readable, check if the sentences flow naturally and there&#8217;s no discontinuation of thoughts (and of course, spelling and grammatical shortcomings in the text). All in all, after the edit the content doesn&#8217;t look anything like the initial draft I sent for editing. If you ever get the chance to get your work reviewed by an editor, don&#8217;t miss it. You&#8217;ll learn a lot.
</p>
<h3 id="focus">Writing, for me, requires a lot more focus than programming</h3>
<p>
  I realized how much more focus writing content needed as compared to programming. I could just not do it in the office. Every 15 minutes I&#8217;d lose my train of thoughts due to some or the other distraction. I believe this could be just because I&#8217;m not used to the idea of writing content in the office, or writing professionally in general. I would end up taking work from home days to make sure I&#8217;m making progress. I had not expected this to happen, especially after having been an amaeteur blogger for a while now. But there I was, trying to think of the next sentence while repeatedly reading the paragraphs above.
</p>
<h3 id="continuous_thought">Having a continuous thought train for a multipart article is a lot more difficult than writing a one off article</h3>
<p>
  So I feel quite comfortable writing something like this very post. It is not as long, and one can write the whole thing in a couple of sittings. Then there are also not a lot of different ways of presenting here. Just text followed by headings followed by more text. That&#8217;s quite a lot easier than writing a multi-day course with each day three or four times as long as a typical blog post with many screenshots, git commits, code snippets and, of course, text. It is important to keep track of all your resources, and any mistake you find later on means all the screenshots and git commits from that point on needs to be updated, which is quite a hassle.
</p>
<h3 id="plan">Have a plan or outline</h3>
<p>
  To avoid finding technical faults / discontinuities in the text much later in the course writing, having a plan or an outline about the content is very important. Each chapter, and every topic in the chapter should be outlined before even starting with the actual writing. Ideally, even the outline should be reviewed by someone who knows about how learning works (yes, that&#8217;s an expertise), and the final outcome should be communicated well in advance. You want to avoid making the course too difficult (and have people drop out after getting stuck) and too easy (and have people drop out after getting bored).
</p>
<h3 id="know_audience">Know your audience&#8217;s technnical competence</h3>
<p>
  When you&#8217;re writing a beginner course in software development, you have to explain every bit of technicality. From creation of a file with special extension to what a git commit is. Any assumption you make regarding the ability of the user to understand the course&#8217;s substance can backfire resulting in many course takers abandoning the course mid way or flooding the communication channels with their questions. To avoid this, it is important to know the technical competence of your target audience. You cannot cater to a wide range of expertise, and no matter what you write, many people are going to be left out. But that&#8217;s okay.
</p>
<h3>In closing</h3>
<p>
  I&#8217;m glad I found this opportunity to do some professional writing. I learned some important aspects of writing, and I tried to share my experiences with you through this post. I hope you find something useful out of this. As always, thank you for reading!</p>
]]></content:encoded>
					
		
		
			</item>
		<item>
		<title>How To &#8211; 12 Column Grid Library From Scratch</title>
		<link>https://nagekar.com/2019/08/how-to-12-column-grid-library-from-scratch.html</link>
		
		<dc:creator><![CDATA[Abhishek Nagekar]]></dc:creator>
		<pubDate>Tue, 13 Aug 2019 22:00:00 +0000</pubDate>
				<category><![CDATA[css]]></category>
		<category><![CDATA[web]]></category>
		<guid isPermaLink="false">http://wp.nagekar.com/2019/08/13/how-to-12-column-grid-library-from-scratch/</guid>

					<description><![CDATA[As web developers we&#8217;ve used countless UI libraries that give us an interface for creating grids. Now things have become much easier thanks to Grid and Flexbox in CSS, but it is still nice to have everything arranged in nice consistent classes for production use. Recently, I set out on a mini-mission to find a [&#8230;]]]></description>
										<content:encoded><![CDATA[<p>
  As web developers we&#8217;ve used countless UI libraries that give us an interface for creating grids. Now things have become much easier thanks to <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Grid_Layout">Grid</a> and <a href="https://developer.mozilla.org/en-US/docs/Learn/CSS/CSS_layout/Flexbox">Flexbox</a> in CSS, but it is still nice to have everything arranged in nice consistent classes for production use. Recently, I set out on a mini-mission to find a grid library for our new design system. In my search, I had to go through many libraries, their features and their source code. Most of them were 90% fit for my use case, but then I&#8217;d find some flaw that&#8217;d put me off. This continued for a couple of hours, at the end of which I uttered the golden developer words <i>&#8220;I know, I&#8217;ll just implement my own grid library&#8221;</i>. The old folks here know what follows. They also know, irrespective of whether you know if this is a bad idea, the temptation to start working in an empty file without any dependencies is too real to just ignore.
</p>
<p>
  Anyway, after spending some time baking my own grid library, and slowly realizing that in probably a week or so, I&#8217;ll end up with exactly the kind of code that I&#8217;d rejected earlier, given how similar everything was looking, I decided to go with something readybaked. But this little exercise of trying to make a grid library taught me a lot about how these libraries are implemented. I wish to share some of that excitement, the learnings with you in this article.
</p>
<p>
  By the end of this article, I want you to have at least a basic understanding of how a grid library is written and be confident to dig into the source code in case you need to customize a library to fit your needs. Note that I&#8217;m using Flexbox. Bootstrap 3 used widths and floats, and Bootstrap 4 uses Flexbox. I believe you can also use CSS3 Grids. Use what feels natural to you.
</p>
<h3>What&#8217;s a grid system?</h3>
<p>
  A grid means what you&#8217;d expect it to mean. It is a two dimensional cellular structure, like a cupboard or a chess board, and you can put/place stuff on/in it. In the context of web development and design, grids usually just define the vertical or columnar properties. The reason is that we do not want to design for horizontal scrolling, and assume that all navigation on a page will be based on vertical scrolling. As a result, whatever the screen width is, we take that as 100% and divide it into the number of columns that we prefer.
</p>
<p>
  First step is to set the number of columns that we&#8217;d like the designs to use. 12 is commonly used because with 12, we can divide the page into 1, 2, 3, 4, 6 and 12 parts (notice that those are just divisors of 12). Then we set the gutter size. Gutter is the gap between two columns. Usually we set it to 1rem which, if we haven&#8217;t modified, should be 16px.
</p>
<figure>
  <img decoding="async" src="https://www.nagekar.com/wp-content/uploads/2020/12/grid-system-mdn.png"/><figcaption>12 column grid with gutters (taken from <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Grid_Layout/Realizing_common_layouts_using_CSS_Grid_Layout">MDN CSS Grid Layout</a>)</figcaption></figure>
<p>
  After that, we set breakpoints. Breakpoints are points where our UI changes in response to a change in the screen size. For modern websites, we have to cater to a wide variety of browsers and screen sizes, and defining a set of screen sizes is our first step towards it. For example
</p>
<ul>
<li>0-450px can be considered to be small mobiles</li>
<li>450px-750px can be large mobiles</li>
<li>750px-1000px can be tables</li>
<li>1000px+ can be desktops</li>
</ul>
<p>
  This is all very arbitrary, of course. we can set whatever sizes fit most of our users&#8217; device types or just copy  what Bootstrap or other popular libraries do (in general, when in doubt follow the standards).
</p>
<p>
  Next is to actually implement designs that adhere to this grid system. Here we make an assumption that we have a UI hi-fi design mockup that was built using the same 12 column grid as base. For ease of implementation, we can define the CSS classes that we frequently use, which while not absolutely necessary, is helpful.
</p>
<h3>Basic CSS</h3>
<p>
  While I mentioned that it isn&#8217;t absolutely necessary to have CSS classes that help us with grids, more often than not we&#8217;ll want to have some of them. The way we do it is we write classes for all the possible widths that a div might take on the screen, right from 1/12 to 12/12 (which is essentially 100% width).
</p>
<figure class="highlight">
<pre><code class="language-scss" data-lang="scss"><span class="nc">.row</span> <span class="p">{</span>
  <span class="nl">display</span><span class="p">:</span> <span class="n">flex</span><span class="p"&gt;;</span>
<span class="p">}</span>
<span class="nc">.col-1</span> <span class="p">{</span>
  <span class="nl">flex-basis</span><span class="p">:</span> <span class="m">8</span><span class="mi">.3333333%</span><span class="p"&gt;;</span> <span class="c1">// (1/12)*100 </span>
<span class="p">}</span>
<span class="nc">.col-2</span> <span class="p">{</span>
  <span class="nl">flex-basis</span><span class="p">:</span> <span class="m">16</span><span class="mi">.666666%</span><span class="p"&gt;;</span> <span class="c1">// (2/12)*100</span>
<span class="p">}</span>
<span class="c1">// and so on</span></code></pre>
</figure>
<p>
  In this short snippet, a <code>.row</code> would be the wrapper class for one or more <code>.col-X</code> classes.
</p>
<h3>Styling our HTML</h3>
<p>
  Consider the simple markup. This is a typical layout for a blog with a navigation section on the left, blog content in the center and a sidebar on the right with some widget.
</p>
<figure class="highlight">
<pre><code class="language-html" data-lang="html"><span class="nt">&lt;main</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;aside</span>   <span class="na">id=</span><span class="s">"navigation"</span><span class="nt">&gt;&lt;/aside&gt;</span>
  <span class="nt">&lt;article</span> <span class="na">id=</span><span class="s">"content"</span><span class="nt">&gt;&lt;/article&gt;</span>
  <span class="nt">&lt;aside</span>   <span class="na">id=</span><span class="s">"blog-roll"</span><span class="nt">&gt;&lt;/aside&gt;</span>
<span class="nt">&lt;/main&gt;</span> </code></pre>
</figure>
<p>
  Now, if we want to split the page into three columns; left sidebar (25% or col-3 containing the &#8220;.navigation&#8221;), main content (50% or col-6 containing &#8220;.content&#8221;) and right sidebar (25% or col-3 containing &#8220;.blog-roll&#8221;), we just have need to add the relevant classes to our markup
</p>
<figure class="highlight">
<pre><code class="language-html" data-lang="html"><span class="nt">&lt;main</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;aside</span>    <span class="na">id=</span><span class="s">"navigation"</span> <span class="na">class=</span><span class="s">"col-3"</span><span class="nt">&gt;&lt;/aside&gt;</span>
  <span class="nt">&lt;article</span>  <span class="na">id=</span><span class="s">"content"</span>    <span class="na">class=</span><span class="s">"col-6"</span><span class="nt">&gt;&lt;/article&gt;</span>
  <span class="nt">&lt;aside</span>    <span class="na">id=</span><span class="s">"blog-roll"</span>  <span class="na">class=</span><span class="s">"col-3"</span><span class="nt">&gt;&lt;/aside&gt;</span>
<span class="nt">&lt;/main&gt;</span> </code></pre>
</figure>
<p>
  It should give you a grid like the following.
</p>
<figure>
  <img decoding="async" src="https://www.nagekar.com/wp-content/uploads/2020/12/grid-system-1.png"/><figcaption>Notice how they just stick with each other without any padding. The purple border is Firefox developer tools showing us the layout.</figcaption></figure>
<h3>Gutters</h3>
<p>
  If you ignore the basic styling and borders, you&#8217;ll notice that there&#8217;s still no spacing between the columns (or gutters) here. We need spacing because otherwise we&#8217;ll have to add internal padding to all the columns and we do not want content from one column sticking to the content from another. To have some of that, we define a gutter variable and add half gutter width padding on right and left side of our columns.
</p>
<figure class="highlight">
<pre><code class="language-scss" data-lang="scss"><span class="nd">:root</span> <span class="p">{</span>
  <span class="na">--gutter-half-width</span><span class="p">:</span> <span class="mi">.5rem</span><span class="p"&gt;;</span>
<span class="p">}</span>
<span class="nc">.row</span> <span class="p">{</span>
  <span class="k">&amp;</span> <span class="o">&gt;</span> <span class="o">*[</span><span class="nt">class</span><span class="o">^=</span><span class="s2">"col-"</span><span class="o">]</span> <span class="p">{</span>
    <span class="nl">padding-left</span><span class="p">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">gutter-half-width</span><span class="p"&gt;);</span>
    <span class="nl">padding-right</span><span class="p">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">gutter-half-width</span><span class="p"&gt;);</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre>
</figure>
<p>
  <strong>Note</strong> that <code>--gutter-half-width</code> is just a <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/Using_CSS_custom_properties">variable in CSS</a> that we access with the <code>var()</code> function. <code>& > *[class^="col-"]</code> selects all direct descendants of row class which have the col-* class set. <code>:root</code> selects the document root.
</p>
<p>
  We don&#8217;t want gutters on the extreme left and extreme right of our grid. We compensate for that with negative margins on the .row class.
</p>
<figure class="highlight">
<pre><code class="language-scss" data-lang="scss"><span class="nc">.row</span> <span class="p">{</span>
  <span class="nl">margin-left</span><span class="p">:</span> <span class="nf">calc</span><span class="p">(</span><span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">gutter-half-width</span><span class="p">)</span> <span class="o">*</span> <span class="m">-1</span><span class="p"&gt;);</span>
  <span class="nl">margin-right</span><span class="p">:</span> <span class="nf">calc</span><span class="p">(</span><span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">gutter-half-width</span><span class="p">)</span> <span class="o">*</span> <span class="m">-1</span><span class="p"&gt;);</span>
<span class="p">}</span></code></pre>
</figure>
<p>
  If you were to re-run the CSS again, we&#8217;d have something like the following.
</p>
<figure>
  <img decoding="async" src="https://www.nagekar.com/wp-content/uploads/2020/12/grid-system-3.png"/><figcaption>Nice and tidy</figcaption></figure>
<h3>Mobile responsiveness</h3>
<p>
  At this point, our grid system is ready. Ready for one screen size, that is. Let&#8217;s see what happens if we switch to mobile view?
</p>
<figure>
  <img decoding="async" src="https://www.nagekar.com/wp-content/uploads/2020/12/grid-system-4.png"/><figcaption>Eww!</figcaption></figure>
<p>
  I mean, it kind of does what we asked it to do, but if those columns were in fact two sidebars and one main content section, and this being displayed on a 320px screen, your users would be pretty irate (or worse, your website becomes popular on <a href="https://www.reddit.com/r/CrappyDesign/">r/CrappyDesign</a>). You don&#8217;t want that, don&#8217;t you?
</p>
<p>
  To fix that, we&#8217;ll use the breakpoints that we had discussed about earlier. Essentially, we want to have three columns on desktops (which we&#8217;ve already made), one on tablet and one on mobile phones in a row. We start off with writing the media queries for each of our breakpoint.
</p>
<figure class="highlight">
<pre><code class="language-scss" data-lang="scss"><span class="k">@media</span> <span class="n">only</span> <span class="n">screen</span> <span class="nf">and</span> <span class="p">(</span><span class="n">max-width</span><span class="o">:</span> <span class="m">449px</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// classes for mobile view</span>
<span class="p">}</span>
<span class="k">@media</span> <span class="n">only</span> <span class="n">screen</span> <span class="nf">and</span> <span class="p">(</span><span class="n">min-width</span><span class="o">:</span> <span class="m">450px</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// classes for tablet view</span>
<span class="p">}</span>
<span class="k">@media</span> <span class="n">only</span> <span class="n">screen</span> <span class="nf">and</span> <span class="p">(</span><span class="n">min-width</span><span class="o">:</span> <span class="m">768px</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// classes for desktop view</span>
<span class="p">}</span></code></pre>
</figure>
<p>
  Next, we write the column CSS classes for each media query (same code, but we&#8217;ll rename them a bit so that we can tell which class is for which viewport). Notice the <code>col-[viewport-name]-[column-width]</code> format. You&#8217;ll might recognize this from libraries like Bootstrap (for example, col-md-3 or col-xs-6).
</p>
<figure class="highlight">
<pre><code class="language-scss" data-lang="scss"><span class="k">@media</span> <span class="n">only</span> <span class="n">screen</span> <span class="nf">and</span> <span class="p">(</span><span class="n">max-width</span><span class="o">:</span> <span class="m">449px</span><span class="p">)</span> <span class="p">{</span>
  <span class="nc">.col-mobile-1</span> <span class="p">{</span>
    <span class="nl">flex-basis</span><span class="p">:</span> <span class="m">8</span><span class="mi">.3333333%</span><span class="p"&gt;;</span>
  <span class="p">}</span>
  <span class="nc">.col-mobile-2</span> <span class="p">{</span>
    <span class="nl">flex-basis</span><span class="p">:</span> <span class="m">16</span><span class="mi">.666666%</span><span class="p"&gt;;</span>
  <span class="p">}</span>
  <span class="c1">// col-mobile-3 to col-mobile-10</span>
  <span class="nc">.col-mobile-11</span> <span class="p">{</span>
    <span class="nl">flex-basis</span><span class="p">:</span> <span class="m">91</span><span class="mi">.666666%</span><span class="p"&gt;;</span>
  <span class="p">}</span>
  <span class="nc">.col-mobile-12</span> <span class="p">{</span>
    <span class="nl">flex-basis</span><span class="p">:</span> <span class="m">100%</span><span class="p"&gt;;</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="k">@media</span> <span class="n">only</span> <span class="n">screen</span> <span class="nf">and</span> <span class="p">(</span><span class="n">min-width</span><span class="o">:</span> <span class="m">450px</span><span class="p">)</span> <span class="p">{</span>
  <span class="nc">.col-tablet-1</span> <span class="p">{</span>
    <span class="nl">flex-basis</span><span class="p">:</span> <span class="m">8</span><span class="mi">.3333333%</span><span class="p"&gt;;</span>
  <span class="p">}</span>
  <span class="nc">.col-tablet-2</span> <span class="p">{</span>
    <span class="nl">flex-basis</span><span class="p">:</span> <span class="m">16</span><span class="mi">.666666%</span><span class="p"&gt;;</span>
  <span class="p">}</span>
  <span class="c1">// col-tablet-3 to col-tablet-12</span>
<span class="p">}</span>
<span class="k">@media</span> <span class="n">only</span> <span class="n">screen</span> <span class="nf">and</span> <span class="p">(</span><span class="n">min-width</span><span class="o">:</span> <span class="m">768px</span><span class="p">)</span> <span class="p">{</span>
  <span class="nc">.col-desktop-1</span> <span class="p">{</span>
    <span class="nl">flex-basis</span><span class="p">:</span> <span class="m">8</span><span class="mi">.3333333%</span><span class="p"&gt;;</span> 
  <span class="p">}</span>
  <span class="nc">.col-desktop-2</span> <span class="p">{</span>
    <span class="nl">flex-basis</span><span class="p">:</span> <span class="m">16</span><span class="mi">.666666%</span><span class="p"&gt;;</span> 
  <span class="p">}</span>
  <span class="c1">// col-desktop-3 to col-desktop-12</span>
<span class="p">}</span></code></pre>
</figure>
<p>
  Now, we can edit our HTML to use these new classes. For each viewport, we add a class which tells the browser how wide it needs to be on that viewport. For example, our <code>article</code> section is 50% in width (or 6 out of 12 columns) on desktop, while 100% on tablet and mobile (or 12 out of 12 columns).
</p>
<figure class="highlight">
<pre><code class="language-html" data-lang="html"><span class="nt">&lt;main</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;aside</span>   <span class="na">class=</span><span class="s">"col-desktop-3
                  col-tablet-12
                  col-mobile-12"</span> <span class="na">id=</span><span class="s">"navigation"</span><span class="nt">&gt;&lt;/aside&gt;</span>
  <span class="nt">&lt;article</span> <span class="na">class=</span><span class="s">"col-desktop-6
                  col-tablet-12
                  col-mobile-12"</span> <span class="na">id=</span><span class="s">"content"</span><span class="nt">&gt;&lt;/article&gt;</span>
  <span class="nt">&lt;aside</span>   <span class="na">class=</span><span class="s">"col-desktop-3
                  col-tablet-12
                  col-mobile-12"</span> <span class="na">id=</span><span class="s">"blog-roll"</span><span class="nt">&gt;&lt;/aside&gt;</span>
<span class="nt">&lt;/main&gt;</span> </code></pre>
</figure>
<p>
  This will ensure our columns are 100% width on tablet and mobile screens. And because our classes are inside of media queries that only fire at the viewport width breakpoints, only the relevant class gets applied. As you can imagine, one can really fine tune how things look by selecting a higher number of breakpoints and designing for a more consistent UI across the spectrum of screen sizes.
</p>
<h3>Bonus &#8211; Hiding sections</h3>
<p>
  Let&#8217;s say we decide that the <code>blog-roll</code> section isn&#8217;t super important on mobile screens, and should be removed. This is a common usecase; hiding specific blocks on specific viewports. And there&#8217;s a very easy way of doing this right in the grid system.
</p>
<p>
  The little trick is to add hidden classes, just like our column classes, to our viewport media queries.
</p>
<figure class="highlight">
<pre><code class="language-scss" data-lang="scss"><span class="k">@media</span> <span class="n">only</span> <span class="n">screen</span> <span class="nf">and</span> <span class="p">(</span><span class="n">max-width</span><span class="o">:</span> <span class="m">449px</span><span class="p">)</span> <span class="p">{</span>
  <span class="nc">.col-mobile-hidden</span> <span class="p">{</span>
    <span class="nl">display</span><span class="p">:</span> <span class="nb">none</span><span class="p"&gt;;</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="k">@media</span> <span class="n">only</span> <span class="n">screen</span> <span class="nf">and</span> <span class="p">(</span><span class="n">min-width</span><span class="o">:</span> <span class="m">450px</span><span class="p">)</span> <span class="p">{</span>
  <span class="nc">.col-tablet-hidden</span> <span class="p">{</span>
    <span class="nl">display</span><span class="p">:</span> <span class="nb">none</span><span class="p"&gt;;</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="k">@media</span> <span class="n">only</span> <span class="n">screen</span> <span class="nf">and</span> <span class="p">(</span><span class="n">min-width</span><span class="o">:</span> <span class="m">768px</span><span class="p">)</span> <span class="p">{</span>
  <span class="nc">.col-desktop-hidden</span> <span class="p">{</span>
    <span class="nl">display</span><span class="p">:</span> <span class="nb">none</span><span class="p"&gt;;</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre>
</figure>
<p>
  Now, to hide the <code>blog-roll</code> on mobile phones, we just add the hidden class to its classlist.
</p>
<figure class="highlight">
<pre><code class="language-html" data-lang="html"><span class="nt">&lt;main</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;aside</span> <span class="na">class=</span><span class="s">"col-desktop-3
                col-tablet-12
                col-mobile-hidden"</span> <span class="na">id=</span><span class="s">"blog-roll"</span><span class="nt">&gt;&lt;/aside&gt;</span>
<span class="nt">&lt;/main&gt;</span> </code></pre>
</figure>
<h3>Code</h3>
<p>
  I&#8217;ve posted truncated snippets above. The whole thing would look something like the following.
</p>
<figure class="highlight">
<pre><code class="language-scss" data-lang="scss">  
<span class="nd">:root</span> <span class="p">{</span>
  <span class="na">--gutter-half-width</span><span class="p">:</span> <span class="mi">.5rem</span><span class="p"&gt;;</span>
<span class="p">}</span>
<span class="nc">.row</span> <span class="p">{</span>
  <span class="k">&amp;</span> <span class="o">&gt;</span> <span class="o">*[</span><span class="nt">class</span><span class="o">^=</span><span class="s2">"col-"</span><span class="o">]</span> <span class="p">{</span>
    <span class="nl">padding-left</span><span class="p">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">gutter-half-width</span><span class="p"&gt;);</span>
    <span class="nl">padding-right</span><span class="p">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">gutter-half-width</span><span class="p"&gt;);</span>
  <span class="p">}</span>
  <span class="nl">margin-left</span><span class="p">:</span> <span class="nf">calc</span><span class="p">(</span><span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">gutter-half-width</span><span class="p">)</span> <span class="o">*</span> <span class="m">-1</span><span class="p"&gt;);</span>
  <span class="nl">margin-right</span><span class="p">:</span> <span class="nf">calc</span><span class="p">(</span><span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">gutter-half-width</span><span class="p">)</span> <span class="o">*</span> <span class="m">-1</span><span class="p"&gt;);</span>
<span class="p">}</span>
<span class="k">@media</span> <span class="n">only</span> <span class="n">screen</span> <span class="nf">and</span> <span class="p">(</span><span class="n">max-width</span><span class="o">:</span> <span class="m">449px</span><span class="p">)</span> <span class="p">{</span>
  <span class="nc">.col-mobile-1</span> <span class="p">{</span>
    <span class="nl">flex-basis</span><span class="p">:</span> <span class="m">8</span><span class="mi">.3333333%</span><span class="p"&gt;;</span>
  <span class="p">}</span>
  <span class="c1">// ...</span>
  <span class="nc">.col-mobile-12</span> <span class="p">{</span>
    <span class="nl">flex-basis</span><span class="p">:</span> <span class="m">100%</span><span class="p"&gt;;</span>
  <span class="p">}</span>
  <span class="nc">.col-mobile-hidden</span> <span class="p">{</span>
    <span class="nl">display</span><span class="p">:</span> <span class="nb">none</span><span class="p"&gt;;</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="k">@media</span> <span class="n">only</span> <span class="n">screen</span> <span class="nf">and</span> <span class="p">(</span><span class="n">min-width</span><span class="o">:</span> <span class="m">450px</span><span class="p">)</span> <span class="p">{</span>
  <span class="nc">.col-tablet-1</span> <span class="p">{</span>
    <span class="nl">flex-basis</span><span class="p">:</span> <span class="m">8</span><span class="mi">.3333333%</span><span class="p"&gt;;</span>
  <span class="p">}</span>
  <span class="c1">// ...</span>
  <span class="nc">.col-tablet-12</span> <span class="p">{</span>
    <span class="nl">flex-basis</span><span class="p">:</span> <span class="m">100%</span><span class="p"&gt;;</span>
  <span class="p">}</span>
  <span class="nc">.col-tablet-hidden</span> <span class="p">{</span>
    <span class="nl">display</span><span class="p">:</span> <span class="nb">none</span><span class="p"&gt;;</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="k">@media</span> <span class="n">only</span> <span class="n">screen</span> <span class="nf">and</span> <span class="p">(</span><span class="n">min-width</span><span class="o">:</span> <span class="m">450px</span><span class="p">)</span> <span class="p">{</span>
  <span class="nc">.col-desktop-1</span> <span class="p">{</span>
    <span class="nl">flex-basis</span><span class="p">:</span> <span class="m">8</span><span class="mi">.3333333%</span><span class="p"&gt;;</span> 
  <span class="p">}</span>
  <span class="c1">// ...</span>
  <span class="nc">.col-desktop-12</span> <span class="p">{</span>
    <span class="nl">flex-basis</span><span class="p">:</span> <span class="m">100%</span><span class="p"&gt;;</span>
  <span class="p">}</span>
  <span class="nc">.col-desktop-hidden</span> <span class="p">{</span>
    <span class="nl">display</span><span class="p">:</span> <span class="nb">none</span><span class="p"&gt;;</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre>
</figure>
<h3>Possible extensions</h3>
<p>
  The flexbox standard defines various ways of arranging things inside the container both along the flex-direction axis (called the main axis) and the cross axis (the axis perpendicular to the main axis). If we were to extend this, we could define helper classes like <code>.col-reverse</code> (flex-direction: reverse) or <code>.col-spread-out</code> (justify-content: space-between) using these properties depending on our use cases.
</p>
<h3>In closing</h3>
<p>
  The flexbox standard is pretty elaborate, and extremely <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Flexible_Box_Layout">well documented</a>. There are also good libraries build around Flexbox that provide what we just build, and much more than that, out of the box. In production, one should try to stick to libraries and not reinvent the wheel.
</p>
<p>
  Having said that, it is also important to understand the libraries that we use. Now we know what actually happens when we use that familiar <code>col-md-6</code> class from Bootstrap, and if need be, we won&#8217;t shy away from editing the source code to make the library fit our needs!
</p>
<p>
  Thank you for reading!</p>
]]></content:encoded>
					
		
		
			</item>
		<item>
		<title>HTML For Semantics, CSS For Visual</title>
		<link>https://nagekar.com/2019/07/html-for-semantics-css-for-visual.html</link>
		
		<dc:creator><![CDATA[Abhishek Nagekar]]></dc:creator>
		<pubDate>Wed, 03 Jul 2019 22:00:00 +0000</pubDate>
				<category><![CDATA[css]]></category>
		<category><![CDATA[html]]></category>
		<category><![CDATA[web]]></category>
		<guid isPermaLink="false">http://wp.nagekar.com/2019/07/03/html-for-semantics-css-for-visual/</guid>

					<description><![CDATA[The best way to learn is to teach, they say. I totally agree, and that&#8217;s one reason I have so many articles on my blog explaining random topics. Part of the goal was always to understand the topic better myself. I got reminded of it while I was preparing for a workshop on introduction to [&#8230;]]]></description>
										<content:encoded><![CDATA[<p>
  The best way to learn is to teach, they say. I totally agree, and that&#8217;s one reason I have so many articles on my blog explaining random topics. Part of the goal was always to understand the topic better myself.
</p>
<p>
  I got reminded of it while I was <a href="/2019/06/webdev-workshop.html">preparing for a workshop</a> on <em>introduction to web technologies</em> for my fellow Berliners who wish to get into tech. Then something interesting happened. I found the root of a problem that I was struggling with for some time at work. I will jot down some notes of this entire experience, and try to tell you about the lessons learned.
</p>
<h3>Our Styleguide</h3>
<p>
  We maintain a frontend styleguide (think: company-specific UI library). We have many HTML elements and <a href="/2015/10/CSS-Crash-Course.html">CSS classes</a> that make our text, buttons and cards look the way we want them to look across the webapps. There&#8217;s a little issue. Most textual styles are defined on HTML elements. So to get a large heading styled with our predefined font-size, font-family, color and a bunch of other styles, one would just use <code>h1</code> (notice: no class needed).
</p>
<p>
  This worked for us until now, and wherever a big heading was required, we would just throw in an <code>h1</code>. Similarly for paragraphs, lists and other textual elements. This made a lot of sense in the past as accessibility or SEO weren&#8217;t a concern. But things changed.
</p>
<h3>Multiple h1s</h3>
<p>
  It all started when our contracted SEO agency told us that we had two h1s on a page. We looked at the page, and it made total sense. There were two &#8216;headings&#8217; of super large size, and our styleguide&#8217;s h1 made total sense from a purely visual perspective. But the second heading was just a title in large font. It had no semantic significance. Now, our product&#8217;s main title and some random text have the same precedence on the page.
</p>
<p>
  This is bad for SEO, no doubt, but this is also bad for screen readers and all mini browsers (like Apple Watch and the like) which rely on the HTML to convey semantic information, and not visual.
</p>
<h3>Thinking and problem solving</h3>
<p>
  I went to our designers and had a discussion. I could just hack and overwrite the styles, but that wasn&#8217;t the point. I asked what could be done. We could change the design, create a new class the resembles heading-1s and then use that on a span and so on. But we couldn&#8217;t think of why we&#8217;ve met with this problem. Maybe we&#8217;re missing something, something obvious, we thought.
</p>
<h3>Conference on web basics</h3>
<p>
  I attended a developer conference a couple of weeks ago. There we had the good fortune of listening to <a href="https://en.wikipedia.org/wiki/H%C3%A5kon_Wium_Lie">Hakun Lie</a> and <a href="https://www.brucelawson.co.uk/">Bruce Lawson</a>. What struck me, apart from how much they cared about web standards and saving the web from the bloat hell that we&#8217;re hurtling towards, is how much one can accomplish just by sticking to web standards. One of the examples used was of the Apple Watch, and the website in question was developed much before anyone imagined a browser on your wrist. If one just uses semantic HTML, one can be sure that their website would work on any device, whether in existence or yet to arrive. And just like that, millions of well-designed websites started to work on the special Apple Watch browser.
</p>
<p>
  This is important to note because there are usually multiple ways of doing something on the web. More often than not, there are a couple of right and many wrong ways. Part of our job as web developers is to ensure that our website isn&#8217;t just pretty visually but also correct semantically and structurally. This is to futureproof our creation.
</p>
<h3>The workshop</h3>
<p>
  I was preparing for this workshop and thinking of various ways I could introduce web development to complete beginners. I referred to some nice articles and tried to understand the meaning of HTML and CSS myself. I tried to understand why reset.css and normalize.css are used, even though I&#8217;ve been using them for years. I came up with interesting analogies to explain the basic pillars of the web and as a result, improved my understanding of these constructs.
</p>
<h3>Lightbulb moment</h3>
<p>
  After the workshop, when I went back to my codebase, I could see the problem staring right back at me. We had styled the HTML elements, and not created separate classes that we could then attach to our elements. This is the result of forgetting the basics and doing something the wrong way because it saves you from writing <code>class=""</code> for every HTML element, which to be fair, doesn&#8217;t seem that bad when you don&#8217;t differentiate between HTML and CSS and use a combination of the two to get the design right.
</p>
<h3>Conclusion</h3>
<p>
  There are a couple of conclusions for me from this article. One is to learn and follow web standards. Semantic HTML is not at all hard, just some 120 tags in total. Then, understand what a markup language means, and how the semantics of a document is different from how it looks or works. Learn the rules of <a href="/2018/11/lets-talk-about-css.html">CSS selectors</a> and how cascading works. Learn that HTML and CSS are declarative, and use them as much as possible. Only where it makes sense, introduce Javascript. In general, keep abstractions to a minimum.
</p>
<p>
  Thank you for reading.</p>
]]></content:encoded>
					
		
		
			</item>
	</channel>
</rss>
