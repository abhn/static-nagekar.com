{"id":2084,"date":"2024-05-18T14:13:39","date_gmt":"2024-05-18T12:13:39","guid":{"rendered":"https:\/\/nagekar.com\/?p=2084"},"modified":"2024-05-18T14:13:39","modified_gmt":"2024-05-18T12:13:39","slug":"using-zotac-zbox-ci327-mini-pc-as-router-feat-pfsense","status":"publish","type":"post","link":"https:\/\/nagekar.com\/2024\/05\/using-zotac-zbox-ci327-mini-pc-as-router-feat-pfsense.html","title":{"rendered":"Using Zotac Zbox CI327 Mini PC as Router (feat. Pfsense)"},"content":{"rendered":"\n<p>This past Christmas, I tasked myself to build my very own home server \/ lab. The goal was to do so at as little an upfront and running cost as possible. One of the components of a home server is a good customizable router. My requirements were modest but power efficient hardware, dual Ethernet ports (for WAN\/LAN separation) and intel network adapter, fanless design for quiet operation, and ideally not more than 50 euros.<\/p>\n\n\n\n<p>On the christmas eve, a Zotac Zbox CI327 on local classified ads caught my attention. It checked all the boxes except for an intel network card. After some reading, I decided to bite and went to pick it up. Since it was the evening of 24th December, it really felt like a Christmas present for myself!<\/p>\n\n\n\n<h2 class=\"wp-block-heading\">Design<\/h2>\n\n\n\n<p>CI327 has a fanless design and it depends on its sturdy metallic body for cooling. Which means when I first picked it up, I was pleasantly surprised at how heavy and sturdy it felt, despite the plastic-y looking frame (not that that would&#8217;ve been a bad thing at 35 euros either).<\/p>\n\n\n\n<p>Don&#8217;t you love it when you set your expectations based on what you&#8217;ll be paying for something and then it turns out to be something you&#8217;d have paid 3x for and still would&#8217;ve felt good?<\/p>\n\n\n\n<p>The rubber foot double as screws to open the box, and can be opened without a screwdriver so that is cool.<\/p>\n\n\n\n<h2 class=\"wp-block-heading\">Realtek NIC woes<\/h2>\n\n\n\n<p>If there&#8217;s one thing that&#8217;s not ideal about the CI327, it is that it comes with a Realtek NIC. I knew people recommended against buying anything with Realtek NICs, but I went with it given the price. Soon I found myself debugging very strange network issues involving the internet capping at 100mbps and sometimes the entire LAN interface refusing to route any traffic. <\/p>\n\n\n\n<p>Upon analyzing the dmesg output, I realized it was a <a href=\"https:\/\/www.google.com\/search?q=zotac+ci327+ethernet+port+issue\">very common issue for this device<\/a>. I tried to follow any advice that I found and it turns out it had to do with outdated drivers which upon updating resolved the issue. <\/p>\n\n\n\n<h2 class=\"wp-block-heading\">Pfsense<\/h2>\n\n\n\n<p>My main motivation of buying the CI327 was to use it as a router for my home network. I was obsessed with setting up a real home server, and the first step towards it (at least how I envisioned everything) was to have a really powerful router that pulls internet from the ISP provided modem and connects everything.<\/p>\n\n\n\n<p>Pfsense was very easy to set up, with the only challenge being finding a display and keyboard to run the setup script.<\/p>\n\n\n\n<figure class=\"wp-block-image size-full\"><img loading=\"lazy\" decoding=\"async\" width=\"1920\" height=\"2560\" src=\"http:\/\/nagekar.com\/wp-content\/uploads\/2024\/05\/IMG_6834-scaled.jpg\" alt=\"\" class=\"wp-image-2166\" srcset=\"https:\/\/nagekar.com\/wp-content\/uploads\/2024\/05\/IMG_6834-scaled.jpg 1920w, https:\/\/nagekar.com\/wp-content\/uploads\/2024\/05\/IMG_6834-225x300.jpg 225w, https:\/\/nagekar.com\/wp-content\/uploads\/2024\/05\/IMG_6834-188x250.jpg 188w, https:\/\/nagekar.com\/wp-content\/uploads\/2024\/05\/IMG_6834-768x1024.jpg 768w, https:\/\/nagekar.com\/wp-content\/uploads\/2024\/05\/IMG_6834-1152x1536.jpg 1152w, https:\/\/nagekar.com\/wp-content\/uploads\/2024\/05\/IMG_6834-1536x2048.jpg 1536w\" sizes=\"auto, (max-width: 1920px) 100vw, 1920px\" \/><\/figure>\n\n\n\n<h2 class=\"wp-block-heading\">Performance<\/h2>\n\n\n\n<p>While I had really no idea what I exactly I wanted from Pfsense, all I could really do was run some speedtests off the LAN port and make sure nothing&#8217;s getting bottlenecked with a quick internet speed test. <\/p>\n\n\n\n<figure class=\"wp-block-image size-full\"><img loading=\"lazy\" decoding=\"async\" width=\"2560\" height=\"1920\" src=\"http:\/\/nagekar.com\/wp-content\/uploads\/2024\/05\/IMG_6844-scaled.jpg\" alt=\"\" class=\"wp-image-2167\" srcset=\"https:\/\/nagekar.com\/wp-content\/uploads\/2024\/05\/IMG_6844-scaled.jpg 2560w, https:\/\/nagekar.com\/wp-content\/uploads\/2024\/05\/IMG_6844-300x225.jpg 300w, https:\/\/nagekar.com\/wp-content\/uploads\/2024\/05\/IMG_6844-250x188.jpg 250w, https:\/\/nagekar.com\/wp-content\/uploads\/2024\/05\/IMG_6844-768x576.jpg 768w, https:\/\/nagekar.com\/wp-content\/uploads\/2024\/05\/IMG_6844-1536x1152.jpg 1536w, https:\/\/nagekar.com\/wp-content\/uploads\/2024\/05\/IMG_6844-2048x1536.jpg 2048w\" sizes=\"auto, (max-width: 2560px) 100vw, 2560px\" \/><\/figure>\n\n\n\n<p>And it seemed to work. I was getting the full throughput of the bandwidth provided to me by my ISP. All that I had to do now was to hook up a switch and a Wireless AP to this LAN network and connect all of my local devices to this network. <\/p>\n\n\n\n<h2 class=\"wp-block-heading\">TP-SG608E Network Switch + Huawei AX2 Pro Wifi 6 Access Point<\/h2>\n\n\n\n<p>I went with the TP-Link TP-SG608E as my managed network switch. The LAN port of the CI327 is now connected to the WAN of the TP link switch, and from here the <a href=\"http:\/\/nagekar.com\/2024\/01\/building-vs-buying-a-nas-a-non-hardware-nerds-perspective.html\" data-type=\"link\" data-id=\"http:\/\/nagekar.com\/2024\/01\/building-vs-buying-a-nas-a-non-hardware-nerds-perspective.html\">Synology NAS<\/a>, Dell Optiplex homeserver, Huawei AX2 Pro Wifi 6 access point and a Raspberry Pi are connected. <\/p>\n\n\n\n<figure class=\"wp-block-image size-full\"><img loading=\"lazy\" decoding=\"async\" width=\"1920\" height=\"2560\" src=\"http:\/\/nagekar.com\/wp-content\/uploads\/2024\/05\/IMG_6902-scaled.jpg\" alt=\"\" class=\"wp-image-2172\" srcset=\"https:\/\/nagekar.com\/wp-content\/uploads\/2024\/05\/IMG_6902-scaled.jpg 1920w, https:\/\/nagekar.com\/wp-content\/uploads\/2024\/05\/IMG_6902-225x300.jpg 225w, https:\/\/nagekar.com\/wp-content\/uploads\/2024\/05\/IMG_6902-188x250.jpg 188w, https:\/\/nagekar.com\/wp-content\/uploads\/2024\/05\/IMG_6902-768x1024.jpg 768w, https:\/\/nagekar.com\/wp-content\/uploads\/2024\/05\/IMG_6902-1152x1536.jpg 1152w, https:\/\/nagekar.com\/wp-content\/uploads\/2024\/05\/IMG_6902-1536x2048.jpg 1536w\" sizes=\"auto, (max-width: 1920px) 100vw, 1920px\" \/><\/figure>\n\n\n\n<figure class=\"wp-block-image size-full\"><img loading=\"lazy\" decoding=\"async\" width=\"1440\" height=\"2560\" src=\"http:\/\/nagekar.com\/wp-content\/uploads\/2024\/05\/A212FE9C-E207-4C3E-8DE7-FC9568440ACA-scaled.jpg\" alt=\"\" class=\"wp-image-2173\" srcset=\"https:\/\/nagekar.com\/wp-content\/uploads\/2024\/05\/A212FE9C-E207-4C3E-8DE7-FC9568440ACA-scaled.jpg 1440w, https:\/\/nagekar.com\/wp-content\/uploads\/2024\/05\/A212FE9C-E207-4C3E-8DE7-FC9568440ACA-169x300.jpg 169w, https:\/\/nagekar.com\/wp-content\/uploads\/2024\/05\/A212FE9C-E207-4C3E-8DE7-FC9568440ACA-141x250.jpg 141w, https:\/\/nagekar.com\/wp-content\/uploads\/2024\/05\/A212FE9C-E207-4C3E-8DE7-FC9568440ACA-768x1365.jpg 768w, https:\/\/nagekar.com\/wp-content\/uploads\/2024\/05\/A212FE9C-E207-4C3E-8DE7-FC9568440ACA-864x1536.jpg 864w, https:\/\/nagekar.com\/wp-content\/uploads\/2024\/05\/A212FE9C-E207-4C3E-8DE7-FC9568440ACA-1152x2048.jpg 1152w\" sizes=\"auto, (max-width: 1440px) 100vw, 1440px\" \/><\/figure>\n\n\n\n<h2 class=\"wp-block-heading\">Conclusion<\/h2>\n\n\n\n<p>In conclusion, the setup is working good enough that I sometimes forget that I have all of these <em>moving parts<\/em> powering my home network. There&#8217;s some interesting software running on both the Dell Optiplex and the Raspberry Pi which I might write a post about in the future. As far as the Zotac Zbox CI327 goes, it is probably one of the most value for money tech purchase I&#8217;ve made and I&#8217;ve very pleased with it in spite of the little Realtek woes.<\/p>\n\n\n\n<p>Thank you for reading!<\/p>\n","protected":false},"excerpt":{"rendered":"<p>This past Christmas, I tasked myself to build my very own home server \/ lab. The goal was to do so at as little an upfront and running cost as possible. One of the components of a home server is a good customizable router. My requirements were modest but power efficient hardware, dual Ethernet ports [&hellip;]<\/p>\n","protected":false},"author":2,"featured_media":0,"comment_status":"closed","ping_status":"","sticky":false,"template":"","format":"standard","meta":{"footnotes":""},"categories":[1],"tags":[3,231],"class_list":["post-2084","post","type-post","status-publish","format-standard","hentry","category-uncategorized","tag-electronics","tag-home-server"],"_links":{"self":[{"href":"https:\/\/nagekar.com\/wp-json\/wp\/v2\/posts\/2084","targetHints":{"allow":["GET"]}}],"collection":[{"href":"https:\/\/nagekar.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/nagekar.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/nagekar.com\/wp-json\/wp\/v2\/users\/2"}],"replies":[{"embeddable":true,"href":"https:\/\/nagekar.com\/wp-json\/wp\/v2\/comments?post=2084"}],"version-history":[{"count":12,"href":"https:\/\/nagekar.com\/wp-json\/wp\/v2\/posts\/2084\/revisions"}],"predecessor-version":[{"id":2176,"href":"https:\/\/nagekar.com\/wp-json\/wp\/v2\/posts\/2084\/revisions\/2176"}],"wp:attachment":[{"href":"https:\/\/nagekar.com\/wp-json\/wp\/v2\/media?parent=2084"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/nagekar.com\/wp-json\/wp\/v2\/categories?post=2084"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/nagekar.com\/wp-json\/wp\/v2\/tags?post=2084"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}