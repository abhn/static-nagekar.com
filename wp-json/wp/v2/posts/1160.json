{"id":1160,"date":"2015-01-18T23:00:00","date_gmt":"2015-01-18T23:00:00","guid":{"rendered":"http:\/\/wp.nagekar.com\/2015\/01\/18\/handling-large-numbers-with-cc\/"},"modified":"2015-01-18T23:00:00","modified_gmt":"2015-01-18T23:00:00","slug":"handling-large-numbers-with-cc","status":"publish","type":"post","link":"https:\/\/nagekar.com\/2015\/01\/handling-large-numbers-with-cc.html","title":{"rendered":"Handling large numbers with C\/C++"},"content":{"rendered":"<p>\n  I will tell you what this is about. I saw a simple looking problem on <a href=\"https:\/\/www.hackerearth.com\/problem\/algorithm\/small-factorials\/\" target=\"_blank\" rel=\"noopener\">HackerEarth<\/a> about finding factorial of given numbers. It looks easy, but another look at the constraints (1&lt;=N&lt;=100) changes everything. Well, not everything, especially if you are going to write it in languages like Python (&#8220;dynamically typed&#8221;) which has built-in capabilities to handle big numbers, but it is really a trouble to do it in C or any such statically typed language.\n<\/p>\n<p>\n  So first of all, what exactly is the difference between statically and dynamically typed languages. Dynamically typed languages require their interpreters to detect the type of the variable from the value that is assigned to it. On the other hand, in statically typed languages, the type of the variables must be known at compile time.\n<\/p>\n<p>\n  Some believe the latter has advantages over the former. As we explicitly state the type, run time errors are reduced and run time performance increases. We won&#8217;t get into that discussion here.\n<\/p>\n<h3>So our problem<\/h4>\n<p>\n  Before getting into it, I will first write the Python code that worked flawlessly and gave answers to factorials of over 100.\n<\/p>\n<p><script src=\"https:\/\/gist.github.com\/abhn\/a7a894bee916cf2910e2.js\"><\/script><\/p>\n<p>\n  As you can see, it doesn&#8217;t get any easier for anybody, no matter how novice he is with programming. But how does one solve the same problem with languages with no native support for big (of order &gt;10^100) numbers? Simple. We make use of algorithms. The first thing that pops in one&#8217;s mind when dealing with numbers this large is the use of arrays. Yes, that is the right way to go, or at least the one that worked for me.\n<\/p>\n<p>\n  So here is the plan. We create an array of integers which will hold a digit in each index, starting with the least significant bit. For example, if we were to store the number 12345 in the array, we would do it like this:\n<\/p>\n<style type=\"text\/css\">.tg  {border-collapse:collapse;border-spacing:0;border-color:#ccc;} .tg td{font-family:Arial, sans-serif;font-size:14px;padding:10px 15px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:#ccc;color:#333;background-color:#fff;} .tg th{font-family:Arial, sans-serif;font-size:14px;font-weight:normal;padding:10px 15px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:#ccc;color:#333;background-color:#f0f0f0;} .tg .tg-xueg{font-weight:bold;background-color:#ffffc7;color:#333333} .tg .tg-2ks1{font-weight:bold;font-size:100%;background-color:#ffffc7;color:#333333} <\/style>\n<p><center><\/p>\n<table class=\"tg\">\n<tbody>\n<tr>\n<th class=\"tg-xueg\">5<\/th>\n<th class=\"tg-xueg\">4<\/th>\n<th class=\"tg-xueg\">3<\/th>\n<th class=\"tg-xueg\">2<\/th>\n<th class=\"tg-2ks1\">1<\/th>\n<\/tr>\n<\/tbody>\n<\/table>\n<p><\/center><\/p>\n<p>\n  That is, <span style=\"background-color: #d9d2e9;\"><i>array[0]<\/i><\/span> stores &#8216;5&#8217;, <span style=\"background-color: #d9d2e9;\"><i>array[1]<\/i><\/span> stores &#8216;4&#8217; and so on. We have reversed the number for a specific reason. For knowing that reason, you have to go back to your 2nd grade class where you were taught to multiply two two-digit numbers. How did you do that?\n<\/p>\n<style type=\"text\/css\">.tg  {border-collapse:collapse;border-spacing:0;border-color:#ccc;} .tg td{font-family:Arial, sans-serif;font-size:14px;padding:3px 11px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:#ccc;color:#333;background-color:#fff;} .tg th{font-family:Arial, sans-serif;font-size:14px;font-weight:normal;padding:3px 11px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:#ccc;color:#333;background-color:#f0f0f0;} .tg .tg-bsv2{background-color:#efefef} .tg .tg-cxkv{background-color:#ffffff} .tg .tg-c7d0{background-color:#bbdaff} .tg .tg-fqpo{background-color:#cbcefb} .tg .tg-8o5d{background-color:#34ff34} <\/style>\n<p><center><\/p>\n<table class=\"tg\" style=\"table-layout: fixed; width: 86px;\">\n<colgroup>\n<col style=\"width: 21px;\"><\/col>\n<col style=\"width: 21px;\"><\/col>\n<col style=\"width: 22px;\"><\/col>\n<col style=\"width: 22px;\"><\/col>\n<\/colgroup>\n<tbody>\n<tr>\n<th class=\"tg-031e\">\n                  \n              <\/th>\n<th class=\"tg-031e\">\n                  \n              <\/th>\n<th class=\"tg-bsv2\">4<\/th>\n<th class=\"tg-031e\">\n                  \n              <\/th>\n<\/tr>\n<tr>\n<td class=\"tg-031e\">\n                  \n              <\/td>\n<td class=\"tg-031e\">\n                  \n              <\/td>\n<td class=\"tg-bsv2\">2<\/td>\n<td class=\"tg-031e\">\n                  \n              <\/td>\n<\/tr>\n<tr>\n<td class=\"tg-031e\">\n                  \n              <\/td>\n<td class=\"tg-cxkv\">\n                  \n              <\/td>\n<td class=\"tg-c7d0\">3<\/td>\n<td class=\"tg-c7d0\">7<\/td>\n<\/tr>\n<tr>\n<td class=\"tg-031e\">\n                  \n              <\/td>\n<td class=\"tg-cxkv\">x<\/td>\n<td class=\"tg-c7d0\">6<\/td>\n<td class=\"tg-c7d0\">3<\/td>\n<\/tr>\n<tr>\n<td class=\"tg-fqpo\">\n                  \n              <\/td>\n<td class=\"tg-fqpo\">1<\/td>\n<td class=\"tg-fqpo\">1<\/td>\n<td class=\"tg-fqpo\">1<\/td>\n<\/tr>\n<tr>\n<td class=\"tg-fqpo\">2<\/td>\n<td class=\"tg-fqpo\">2<\/td>\n<td class=\"tg-fqpo\">2<\/td>\n<td class=\"tg-fqpo\">0<\/td>\n<\/tr>\n<tr>\n<td class=\"tg-8o5d\">2<\/td>\n<td class=\"tg-8o5d\">3<\/td>\n<td class=\"tg-8o5d\">3<\/td>\n<td class=\"tg-8o5d\">1<\/td>\n<\/tr>\n<\/tbody>\n<\/table>\n<p><\/center><\/p>\n<p>\n  Got the memory back? Although it may seem a trivial thing now, notice that you never do a multiplication whose result is more than 81, that is, 9&#215;9 which is the product of largest two single digit numbers. So can you somehow make the computer follow the same method to calculate the factorial, such that it never does a &gt;81 digit addition in the entire process, which is well inside the size of the shortest numeric data type in C <i>(unsigned short: 65,535)<\/i>? Yes, of course. We are coders, right? \ud83d\ude09\n<\/p>\n<p>\n  To start off, we will need variables. We will use <span style=\"background-color: #d9d2e9;\"><i>num<\/i><\/span> to accept the input number whose factorial is to be found out. <span style=\"background-color: #d9d2e9;\"><i>cur<\/i><\/span> stores the result of the calculation<i> <span style=\"background-color: #d9d2e9;\">i * arr[j] + temp<\/span><\/i>. The least significant digit from <span style=\"background-color: #d9d2e9;\"><i>cur<\/i><\/span> (for example <i>3<\/i>, in case of <i>123<\/i>) goes into <span style=\"background-color: #d9d2e9;\"><i>arr[j]<\/i><\/span> while the remaining digits get stored in the <span style=\"background-color: #d9d2e9;\"><i>temp<\/i><\/span> variable. Follow the above step till the end of the array which we initially denote by <i><span style=\"background-color: #d9d2e9;\">pos<\/span> <\/i>variable. <span style=\"background-color: #d9d2e9;\"><i>pos<\/i><\/span> is initialized and assigned 1, as we initialize our <span style=\"background-color: #d9d2e9;\"><i>arr[]<\/i><\/span> with <i><span style=\"background-color: #d9d2e9;\">arr[0]=1<\/span> (since we will be using this value to multiply subsequent 2,3,4&#8230;<span style=\"background-color: #d9d2e9;\">num<\/span>, we don&#8217;t want our answer to evaluate to 0).<\/i>\n<\/p>\n<p>\n  After this loop, we will need to empty out the carry forward integer in our <span style=\"background-color: #d9d2e9;\"><i>temp<\/i><\/span> variable. It will be done in the reverse order as well, but here, we will increment <span style=\"background-color: #d9d2e9;\"><i>pos<\/i><\/span> to make it always point to the number of digits in <span style=\"background-color: #d9d2e9;\"><i>arr[]<\/i><\/span>.\n<\/p>\n<p>\n  Finally you can print our the <span style=\"background-color: #d9d2e9;\"><i>arr[]<\/i><\/span> in the reverse order to get the expected answer and this should not surprise you since we have been doing storing of the numbers in reverse order in our <span style=\"background-color: #d9d2e9;\"><i>arr[]<\/i><\/span>. Here is the C++ code that I wrote. I didn&#8217;t cross check the results for larger values of <span style=\"background-color: #d9d2e9;\"><i>num<\/i><\/span>, so take care with that.\n<\/p>\n<p><script src=\"https:\/\/gist.github.com\/abhn\/34824e2918e86fcf2576.js\"><\/script><\/p>\n<p>\n  So that was it for this short article. I am reading more on GMP (<a href=\"https:\/\/gmplib.org\/\" target=\"_blank\" rel=\"noopener\"><i>GNU Multiple Precision Arithmetic Library<\/i><\/a>) that is written exactly for this purpose. Nevertheless, it is always good to know how to do it by hand. Thank you.<\/p>\n","protected":false},"excerpt":{"rendered":"<p>I will tell you what this is about. I saw a simple looking problem on HackerEarth about finding factorial of given numbers. It looks easy, but another look at the constraints (1&lt;=N&lt;=100) changes everything. Well, not everything, especially if you are going to write it in languages like Python (&#8220;dynamically typed&#8221;) which has built-in capabilities [&hellip;]<\/p>\n","protected":false},"author":2,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"footnotes":""},"categories":[],"tags":[17],"class_list":["post-1160","post","type-post","status-publish","format-standard","hentry","tag-c"],"_links":{"self":[{"href":"https:\/\/nagekar.com\/wp-json\/wp\/v2\/posts\/1160","targetHints":{"allow":["GET"]}}],"collection":[{"href":"https:\/\/nagekar.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/nagekar.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/nagekar.com\/wp-json\/wp\/v2\/users\/2"}],"replies":[{"embeddable":true,"href":"https:\/\/nagekar.com\/wp-json\/wp\/v2\/comments?post=1160"}],"version-history":[{"count":0,"href":"https:\/\/nagekar.com\/wp-json\/wp\/v2\/posts\/1160\/revisions"}],"wp:attachment":[{"href":"https:\/\/nagekar.com\/wp-json\/wp\/v2\/media?parent=1160"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/nagekar.com\/wp-json\/wp\/v2\/categories?post=1160"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/nagekar.com\/wp-json\/wp\/v2\/tags?post=1160"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}